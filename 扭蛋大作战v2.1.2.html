<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>æ‰­è›‹å¤§æŒ‘æˆ˜</title>
    <link href="https://fonts.googleapis.com/css2?family=Ma+Shan+Zheng&display=swap" rel="stylesheet">
    <!-- å¼•å…¥å­¦ç”Ÿæ•°æ®ä¼ é€’è„šæœ¬ -->
    <script src="studentData.js"></script>
    <style>

.loading-spinner {
    display: inline-block;
    width: 20px;
    height: 20px;
    border: 3px solid rgba(255,105,180,0.3);
    border-radius: 50%;
    border-top-color: #ff69b4;
    animation: spin 1s ease-in-out infinite;
}

@keyframes spin {
    to { transform: rotate(360deg); }
}

.loading-spinner {
    display: inline-block;
    width: 20px;
    height: 20px;
    border: 3px solid rgba(255,105,180,0.3);
    border-radius: 50%;
    border-top-color: #ff69b4;
    animation: spin 1s ease-in-out infinite;
}
@keyframes spin {
    to { transform: rotate(360deg); }
}

        /* ä¿®æ”¹å­¦ç”Ÿæ˜¾ç¤ºæ ·å¼ */
    .student-display {
        position: fixed;
        top: 20px;
        left: 50%;
        transform: translateX(-50%);
        background: linear-gradient(145deg, #ff88bb, #ff5599);
        padding: 12px 25px;
        border-radius: 20px;
        box-shadow: 0 5px 15px rgba(255, 85, 153, 0.4);
        z-index: 100;
        color: white;
        font-weight: bold;
        animation: fadeIn 0.8s ease-out;
        text-align: center;
        min-width: 300px;
    }
    
    @keyframes fadeIn {
        from { opacity: 0; transform: translate(-50%, -30px); }
        to { opacity: 1; transform: translate(-50%, 0); }
    }
    
    .student-name {
        font-size: 1.5em;
        margin-bottom: 5px;
        text-align: center;
        font-family: 'Ma Shan Zheng', cursive;
        text-shadow: 1px 1px 3px rgba(0,0,0,0.2);
    }
    
    .welcome-text {
        font-size: 1em;
        opacity: 0.9;
    }
    /* æ·»åŠ è§£æå†…å®¹çš„æ ·å¼ */
.explanation {
    margin-top: 20px;
    padding: 15px;
    background: rgba(255,255,255,0.95);
    border-radius: 15px;
    box-shadow: 0 3px 10px rgba(0,0,0,0.1);
    animation: slideIn 0.5s ease-out;
}

@keyframes slideIn {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
}

.explanation-content h3 {
    color: #ff69b4;
    margin-bottom: 10px;
    font-family: 'Ma Shan Zheng', cursive;
}

.explanation-content p {
    color: #666;
    line-height: 1.6;
    font-size: 1.1em;
}

    /* éŸ³ä¹æ§åˆ¶æŒ‰é’®æ ·å¼ */
    .music-control {
        position: fixed;
        top: 20px;
        left: 20px;
        width: 40px;
        height: 40px;
        background: linear-gradient(145deg, #ff88bb, #ff5599);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        box-shadow: 0 5px 15px rgba(255,85,153,0.3);
        z-index: 100;
        transition: all 0.3s;
    }

    .music-control:hover {
        transform: scale(1.1);
    }

    .music-control.muted {
        background: linear-gradient(145deg, #cccccc, #999999);
    }

    .music-icon {
        width: 24px;
        height: 24px;
        background-image: url('yinfu.svg');
        background-size: contain;
        background-repeat: no-repeat;
        background-position: center;
        filter: brightness(0) invert(1) drop-shadow(0 0 2px rgba(255,255,255,0.8));
    }
    

    /* éš¾åº¦è¯´æ˜æ ·å¼ */
    .difficulty-description {
        margin-top: 20px;
        padding: 15px;
        background: rgba(255,255,255,0.9);
        border-radius: 15px;
        box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        font-size: 1.1em;
        line-height: 1.6;
        color: #666;
        max-width: 500px;
        text-align: left;
    }
    .difficulty-description span {
        display: block;
        margin: 8px 0;
    }
    
    /* éš¾åº¦æ ‡ç­¾æ ·å¼ */
    .difficulty-badge {
        display: inline-block;
        padding: 5px 12px;
        border-radius: 20px;
        font-size: 0.9em;
        font-weight: bold;
        margin-left: 10px;
        color: white;
    }
    .easy-badge {
        background: linear-gradient(145deg, #4caf50, #8bc34a);
    }
    .medium-badge {
        background: linear-gradient(145deg, #ff9800, #ffc107);
    }
    .hard-badge {
        background: linear-gradient(145deg, #f44336, #ff5722);
    }

    /* è®¡æ—¶å™¨åŠ¨ç”» */
    @keyframes pulse {
        0% { transform: scale(1); }
        100% { transform: scale(1.1); }
    }

    /* è¿å‡»æç¤º */
    .combo-text {
        position: fixed;
        top: 20%;
        left: 50%;
        transform: translateX(-50%);
        font-size: 2.5em;
        color: #ffd700;
        text-shadow: 0 0 10px rgba(255,215,0,0.5);
        animation: comboPop 0.8s cubic-bezier(0.18, 0.89, 0.32, 1.28);
        opacity: 0;
        pointer-events: none;
    }

    @keyframes comboPop {
        0% { opacity: 0; transform: translate(-50%, 20px) scale(0.5); }
        80% { opacity: 1; transform: translate(-50%, 0) scale(1.2); }
        100% { opacity: 0; transform: translate(-50%, -20px) scale(0.8); }
    }

    /* ç²’å­æ•ˆæœ */
    .particle {
        position: absolute;
        width: 8px;
        height: 8px;
        border-radius: 50%;
        animation: particleFly 0.8s ease-out forwards;
        pointer-events: none;
    }

    @keyframes particleFly {
        0% { 
            opacity: 1;
            transform: translate(0, 0) scale(1);
        }
        100% { 
            opacity: 0;
            transform: translate(var(--tx), var(--ty)) scale(0.2);
        }
    }
/* æ–°å¢é‡‘å¸é›¨æ•ˆæœ */
.coin {
    position: absolute;
    width: 20px;
    height: 20px;
    background: radial-gradient(circle at 30% 30%, #ffeb3b, #ffc107);
    border-radius: 50%;
    box-shadow: 0 0 10px rgba(255, 193, 7, 0.8);
    z-index: 1000;
    animation: coinFall 1.5s ease-in forwards;
    pointer-events: none;
}

@keyframes coinFall {
    0% {
        transform: translateY(-50vh) rotate(0deg);
        opacity: 1;
    }
    80% {
        opacity: 1;
    }
    100% {
        transform: translateY(100vh) rotate(360deg);
        opacity: 0;
    }
}

/* è§£ææ ·å¼ */
.explanation {
    margin-top: 20px;
    padding: 15px;
    background: rgba(255, 255, 255, 0.95);
    border-radius: 15px;
    box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
}

.explanation-content {
    color: #666;
    font-size: 1.1em;
    line-height: 1.6;
}

.explanation-content h3 {
    color: #ff69b4;
    margin-bottom: 10px;
    font-family: 'Ma Shan Zheng', cursive;
}

/* æˆå°±å¾½ç« æ ·å¼ */
.achievement {
    position: fixed;
    bottom: 20px;
    left: 20px;
    background: rgba(255, 255, 255, 0.9);
    border-radius: 10px;
    padding: 15px;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
    display: flex;
    align-items: center;
    transform: translateX(-120%);
    animation: achievementSlide 5s ease-in-out forwards;
    z-index: 1000;
}

.achievement-icon {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
    display: flex;
    align-items: center;
    justify-content: center;
    margin-right: 15px;
    color: white;
    font-size: 1.2em;
}

.achievement-text {
    display: flex;
    flex-direction: column;
}

.achievement-title {
    font-weight: bold;
    color: #333;
}

.achievement-desc {
    font-size: 0.8em;
    color: #666;
}

@keyframes achievementSlide {
    0% { transform: translateX(-120%); }
    15% { transform: translateX(0); }
    85% { transform: translateX(0); }
    100% { transform: translateX(-120%); }
}

/* çƒŸèŠ±åŠ¨ç”» */
.firework {
    position: fixed;
    width: 5px;
    height: 5px;
    border-radius: 50%;
    pointer-events: none;
    z-index: 1000;
}

@keyframes fireworkExplode {
    0% { 
        transform: scale(0.1);
        opacity: 1;
        box-shadow: 0 0 0 0px rgba(255, 255, 255, 0.5);
    }
    100% { 
        transform: scale(1);
        opacity: 0;
        box-shadow: 0 0 0 50px rgba(255, 255, 255, 0);
    }
}

/* æ‰­è›‹å¼€å¯å¢å¼ºåŠ¨ç”» */
.gacha-sparkle {
    position: absolute;
    width: 4px;
    height: 15px;
    background: white;
    border-radius: 2px;
    filter: blur(1px);
    opacity: 0;
    animation: sparkleShine 0.6s ease-out forwards;
    transform-origin: center bottom;
}

@keyframes sparkleShine {
    0% { opacity: 0; transform: scale(0); }
    50% { opacity: 1; transform: scale(1); }
    100% { opacity: 0; transform: scale(0.5); }
}

/* æ–°å¢æµ®åŠ¨æ°”æ³¡ */
.bubble {
    position: fixed;
    width: var(--size);
    height: var(--size);
    border-radius: 50%;
    background: radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.8), rgba(255, 255, 255, 0.3));
    box-shadow: inset 0 0 10px rgba(255, 255, 255, 0.5);
    animation: bubbleFloat var(--duration) ease-in-out infinite alternate;
    z-index: -1;
    pointer-events: none;
}

@keyframes bubbleFloat {
    0% { transform: translate(0, 0); }
    100% { transform: translate(var(--tx), var(--ty)); }
}

/* è¿›åº¦æ¡æ ·å¼ - ç§»é™¤äº†åŠ¨ç”»æ•ˆæœ */
.progress-glow {
    display: none; /* éšè—è¿›åº¦æ¡å…‰æ•ˆ */
}

@keyframes progressGlow {
    /* åŠ¨ç”»å·²ç¦ç”¨ */
    0%, 100% { opacity: 0; }
}

/* æ–°å¢3DèŠ±æœµåŠ¨ç”» */
@keyframes crack {
    0% { transform: rotate(0) scale(1); }
    30% { transform: rotate(-15deg) scale(1.2); }
    100% { 
        transform: rotate(720deg) scale(0);
        opacity: 0;
    }
}

@keyframes flowerBloom {
    0% { 
        transform: scale(0) rotateX(90deg);
        filter: brightness(1.5);
    }
    70% {
        transform: scale(1.2) rotateX(0deg);
    }
    100% { 
        transform: scale(1) rotateX(0deg);
        filter: brightness(1);
    }
}

.gacha-shell {
    perspective: 1000px;
    width: 100px;
    height: 100px;
}

.gacha-crack {
    background: linear-gradient(145deg, #ff88bb 30%, #ff5599 70%);
    box-shadow: 0 10px 30px rgba(255,85,153,0.3);
}

.flower {
    width: 80px;
    height: 80px;
    animation: flowerBloom 1s cubic-bezier(0.68, -0.55, 0.27, 1.55);
    transform-style: preserve-3d;
}

/* å¤šå±‚èŠ±ç“£ */
.petal-outer {
    position: absolute;
    width: 22px;
    height: 35px;
    background: linear-gradient(160deg, #ff4477 20%, #ff2255 80%);
    border-radius: 15px 15px 8px 8px;
    transform-origin: bottom center;
    filter: drop-shadow(2px 2px 3px rgba(0,0,0,0.1));
}

.petal-inner {
    position: absolute;
    width: 18px;
    height: 28px;
    background: linear-gradient(160deg, #ff6699 20%, #ff4477 80%);
    border-radius: 12px 12px 6px 6px;
    transform-origin: bottom center;
}

/* 3Dæ—‹è½¬æ•ˆæœ */
.petal-outer {
    transform: rotate(var(--deg)) translateY(-15px) rotateX(30deg);
}

.petal-inner {
    transform: rotate(var(--deg)) translateY(-10px) rotateX(15deg);
}

/* èŠ±ç“£åŠ¨ç”» */
@keyframes petalFloat {
    0%,100% { transform: rotate(var(--deg)) translateY(-15px) rotateX(30deg); }
    50% { transform: rotate(var(--deg)) translateY(-25px) rotateX(45deg); }
}

/* èŠ±è•Šç‰¹æ•ˆ */
.center {
    background: linear-gradient(#ffdd33, #ffcc00);
    box-shadow: 0 0 15px #ffdd3380;
    animation: centerPulse 2s ease-in-out infinite;
}

@keyframes centerPulse {
    0%,100% { transform: translate(-50%, -50%) scale(1); }
    50% { transform: translate(-50%, -50%) scale(1.1); }
}

/* æ–°å¢ç»½æ”¾æ˜Ÿå…‰ */
.star {
    position: absolute;
    width: 8px;
    height: 8px;
    background: #fff;
    clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%);
    animation: starTwinkle 0.8s ease-out;
}

@keyframes starTwinkle {
    0% { transform: scale(0); opacity: 0; }
    50% { transform: scale(1.5); opacity: 1; }
    100% { transform: scale(1); opacity: 0; }
}

/* æ–°å¢æ‰­è›‹æ‰“å¼€åŠ¨ç”» */
@keyframes crack {
    0% { transform: rotate(0); }
    50% { transform: rotate(-15deg); }
    100% { 
        transform: rotate(0) scale(0.8);
        opacity: 0;
    }
}

@keyframes flowerBloom {
    0% { transform: scale(0) rotate(0deg); }
    50% { transform: scale(1.2) rotate(-15deg); }
    100% { transform: scale(1) rotate(0deg); }
}

.gacha-shell {
    position: relative;
    width: 80px;
    height: 80px;
    cursor: pointer;
}

.gacha-crack {
    position: absolute;
    width: 100%;
    height: 100%;
    background: linear-gradient(145deg, #ff88bb, #ff5599);
    border-radius: 50%;
    animation: crack 0.8s ease-out forwards;
}

.flower {
    position: absolute;
    width: 60px;
    height: 60px;
    animation: flowerBloom 0.8s 0.3s cubic-bezier(0.18, 0.89, 0.32, 1.28) both;
    filter: drop-shadow(0 2px 4px rgba(255,85,153,0.3));
}

.petal {
    position: absolute;
    width: 15px;
    height: 25px;
    background: linear-gradient(145deg, #ff6688, #ff3366);
    border-radius: 15px 15px 5px 5px;
    transform-origin: bottom center;
}

.center {
    position: absolute;
    width: 20px;
    height: 20px;
    background: #ffdd33;
    border-radius: 50%;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

/* è°ƒæ•´æ‰“å¼€åŒºåŸŸæ ·å¼ */
.gacha-open-area {
    gap: 30px;
    margin: 40px 0;
}

/* èŠ±ç“£å®šä½ */
.petal:nth-child(1) { transform: rotate(0deg) translateY(-10px); }
.petal:nth-child(2) { transform: rotate(45deg) translateY(-10px); }
.petal:nth-child(3) { transform: rotate(90deg) translateY(-10px); }
.petal:nth-child(4) { transform: rotate(135deg) translateY(-10px); }
.petal:nth-child(5) { transform: rotate(180deg) translateY(-10px); }
.petal:nth-child(6) { transform: rotate(225deg) translateY(-10px); }
.petal:nth-child(7) { transform: rotate(270deg) translateY(-10px); }
.petal:nth-child(8) { transform: rotate(315deg) translateY(-10px); }

/* èŠ±ç“£åŠ¨ç”» */
@keyframes petalFloat {
    0% { transform: translateY(0) rotate(0deg); }
    50% { transform: translateY(-20px) rotate(10deg); }
    100% { transform: translateY(0) rotate(0deg); }
}

.flower:hover .petal {
    animation: petalFloat 1.2s ease-in-out infinite;
}

/* é”™é¢˜é€‰é¡¹æ ·å¼ */
.wrong-options {
        margin-top: 15px;
        padding: 10px;
        background: #fff5f7;
        border-radius: 10px;
    }
    .wrong-option {
        padding: 8px;
        margin: 5px 0;
        border-radius: 8px;
        position: relative;
        transition: all 0.3s;
    }
    .correct-mark {
        background: #77dd77;
        color: white;
    }
    .wrong-mark {
        background: #ff6961;
        color: white;
    }
    .option-mark {
        display: inline-block;
        width: 24px;
        height: 24px;
        border-radius: 50%;
        text-align: center;
        margin-right: 10px;
    }

        /* åŸºç¡€æ ·å¼ */
        body {
            margin: 0;
            padding: 20px;
            background: #ffe6f4;
            font-family: 'Comic Sans MS', cursive;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        .quiz-title {
    color: #ff69b4;
    font-family: 'Ma Shan Zheng', cursive;
    font-size: 3.5em; /* ä¿®æ”¹å¤„ */
    text-align: center;
    margin: 30px 0;   /* ä¿®æ”¹å¤„ */
    text-shadow: 2px 2px #fff;
    animation: titleBounce 1s infinite alternate;
    font-weight: bold; /* æ–°å¢ */
}

@media (max-width: 600px) {
    .quiz-title {
        font-size: 2.8em;
        margin: 20px 0;
    }
}

        @keyframes titleBounce {
        from { transform: translateY(0); }
        to { transform: translateY(-5px); }
        }

        /* ç•Œé¢å®¹å™¨ */
        .screen {
            display: none;
            max-width: 800px;
            width: 100%;
            margin: 0 auto;
        }

        /* å¼€å§‹ç•Œé¢ */
        #startScreen {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 80vh;
            text-align: center;
        }

        /* æ ‡é¢˜æ ·å¼ */
        .title {
            color: #ff69b4;
            font-size: 3.5em;
            text-shadow: 2px 2px #fff;
            margin-bottom: 40px;
            line-height: 1.2;
        }

        /* æŒ‰é’®å®¹å™¨ */
        .button-container {
            display: flex;
            flex-direction: column;
            gap: 25px;
        }

        /* 3DæŒ‰é’®æ ·å¼ */
        .bubble-btn {
            position: relative;
            padding: 18px 40px;
            background: linear-gradient(145deg, #ff88bb, #ff5599);
            border: none;
            border-radius: 35px;
            color: white;
            font-size: 1.6em;
            cursor: pointer;
            box-shadow: 0 15px 25px -5px rgba(255,85,153,0.4);
            transition: all 0.3s;
        }

        .bubble-btn:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 25px 35px -5px rgba(255,85,153,0.5);
        }

        /* è¿›åº¦æ¡æ ·å¼ */
        .progress-container {
            display: flex;
            align-items: center;
            margin: 20px 0;
            gap: 15px;
        }
        .progress-text {
            color: #ff69b4;
            font-size: 1.2em;
            white-space: nowrap;
        }
        .progress-bar {
            height: 15px;
            background: #ffe0ed;
            border-radius: 10px;
            overflow: hidden;
            flex-grow: 1;
        }
        .progress {
            width: 0%;
            height: 100%;
            background: linear-gradient(90deg, #ff88bb, #ff5599);
            transition: width 0.5s;
        }

        /* é¢˜ç›®æ ·å¼ */
        .question {
            font-size: 1.8em;
            color: #ff69b4;
            margin: 20px 0;
            text-align: center;
        }

        /* é€‰é¡¹æ ·å¼ */
        .option {
            display: block;
            margin: 15px;
            padding: 20px;
            background: white;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
        }
        .correct-answer {
            background: #77dd77;
            color: white;
        }
        .wrong-answer {
            background: #ff6961;
            color: white;
        }

        /* åé¦ˆæç¤º */
        .answer-tip {
            text-align: center;
            color: #ff4444;
            margin: 15px 0;
            font-size: 1.2em;
        }

        /* æŒ‰é’®ä½ç½® */
        #backBtn {
            position: fixed;
            bottom: 30px;
            left: 30px;
            display: none;
        }
        #nextBtn {
            position: fixed;
            bottom: 30px;
            right: 30px;
            display: none;
        }

        /* ç»“ç®—ç•Œé¢ */
        .score-text {
            font-family: 'Ma Shan Zheng', cursive;
            color: #ff0000;
            font-size: 5em;
            text-align: center;
            margin: 20px 0;
        }
        .score-line {
            border-bottom: 4px solid #ff0000;
            width: 200px;
            margin: 0 auto 30px;
        }
        .score-emoji {
            font-size: 2.5em;
            color: #ff69b4;
            text-align: center;
            margin: 20px 0;
            font-family: 'Ma Shan Zheng', cursive;
            text-shadow: 1px 1px #fff;
        }

        /* é”™é¢˜ç•Œé¢ */
        #wrongScreen {
            padding: 20px;
        }
        .wrong-list {
            max-height: 60vh;
            overflow-y: auto;
            margin: 20px 0;
            padding: 10px;
            border: 2px solid #ff88bb;
            border-radius: 15px;
        }
        .wrong-item {
            margin: 15px 0;
            padding: 20px;
            background: white;
            border-radius: 15px;
        }

        /* æ‰­è›‹ç³»ç»Ÿæ ·å¼ */
        .gacha-counter {
            position: fixed;
            top: 20px;
            right: 20px;
            display: flex;
            align-items: center;
            padding: 10px 20px;
            background: rgba(255,255,255,0.9);
            border-radius: 30px;
            box-shadow: 0 5px 15px rgba(255,85,153,0.3);
            z-index: 100;
        }
        .gacha-icon {
            width: 40px;
            height: 40px;
            margin-right: 10px;
            background: linear-gradient(145deg, #ff88bb, #ff5599);
            border-radius: 50%;
            border: 2px solid white;
            position: relative;
        }
        .gacha-icon::after {
            content: '';
            position: absolute;
            top: 5px;
            left: 5px;
            width: 10px;
            height: 10px;
            background: rgba(255,255,255,0.8);
            border-radius: 50%;
        }

        @keyframes gachaGet {
            0% { transform: scale(0) rotate(-180deg); }
            50% { transform: scale(1.2) rotate(0deg); }
            100% { transform: scale(1) rotate(360deg); }
        }
        .gacha-animation {
            position: fixed;
            top: 50%;
            left: 50%;
            width: 60px;
            height: 60px;
            background: linear-gradient(145deg, #ff88bb, #ff5599);
            border-radius: 50%;
            animation: gachaGet 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94) both;
            z-index: 200;
        }

        .gacha-result {
            text-align: center;
            margin: 20px 0;
        }
        .gacha-result-box {
            display: inline-flex;
            align-items: center;
            padding: 15px 30px;
            background: white;
            border-radius: 50px;
            cursor: pointer;
            transition: 0.3s;
        }
        .gacha-result-box:hover {
            transform: scale(1.05);
        }
        .gacha-open-area {
            display: none;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
            margin: 30px 0;
        }
        .opened-gacha {
            width: 80px;
            height: 80px;
            background: linear-gradient(145deg, #ff88bb, #ff5599);
            border-radius: 50%;
            animation: gachaOpen 0.6s ease-out both;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.2em;
            box-shadow: 0 8px 20px rgba(255,85,153,0.3);
        }
        .export-btn {
            width: 40%;
            padding: 12px;
            background: #13c2c2;
            border: none;
            color: white;
            border-radius: 5px;
            margin-top: 20px;
            cursor: pointer;
            transition: background 0.3s;
        }

        .export-btn:hover {
            background: #08979c;
        }
        @keyframes gachaOpen {
            0% { transform: scale(0) rotate(-180deg); opacity: 0; }
            100% { transform: scale(1) rotate(0deg); opacity: 1; }
        }
    </style>
</head>
<body>
    <!-- éŸ³ä¹æ§åˆ¶æŒ‰é’® -->
    <div id="musicControl" class="music-control">
        <div class="music-icon"></div>
    </div>
     <!-- ä¿®æ”¹å­¦ç”Ÿæ˜¾ç¤ºåŒºåŸŸ -->
     <div id="studentDisplay" class="student-display" style="display: none;">
        <div class="student-name"></div>
        <div class="welcome-text">æ¬¢è¿æ‚¨æ¥å‚åŠ æŒ‘æˆ˜ï¼</div>
    </div>

    <!-- èƒŒæ™¯éŸ³ä¹ -->
    <audio id="bgm" src="bgm.mp3" autoplay loop></audio>


    <script>
        // ç¡®ä¿åœ¨é¡µé¢å®Œå…¨åŠ è½½åç«‹å³æ‰§è¡Œ
        window.onload = function() {
            // è·å–å­¦ç”Ÿæ•°æ®
            let selectedStudent = null;
            
            // å°è¯•ä»localStorageè·å–æ•°æ®ï¼ˆä¼˜å…ˆï¼‰
            const storedStudent = localStorage.getItem('selectedStudent');
            if (storedStudent) {
                try {
                    selectedStudent = JSON.parse(storedStudent);
                    console.log('ä»localStorageè·å–åˆ°å­¦ç”Ÿæ•°æ®:', selectedStudent);
                } catch (e) {
                    console.error('è§£æå­¦ç”Ÿæ•°æ®å¤±è´¥:', e);
                }
            }
            
            // å¦‚æœlocalStorageæ²¡æœ‰æ•°æ®ï¼Œå†å°è¯•ä»StudentDataè·å–
            if (!selectedStudent || !selectedStudent.name) {
                if (typeof StudentData !== 'undefined' && StudentData.getStudent) {
                    selectedStudent = StudentData.getStudent();
                    console.log('ä»StudentDataè·å–åˆ°å­¦ç”Ÿæ•°æ®:', selectedStudent);
                }
            }
            
            // å¦‚æœæœ‰å­¦ç”Ÿæ•°æ®ï¼Œæ˜¾ç¤ºå­¦ç”ŸåŒºåŸŸ
            if (selectedStudent && selectedStudent.name) {
                const studentDisplay = document.getElementById('studentDisplay');
                if (studentDisplay) {
                    const studentName = studentDisplay.querySelector('.student-name');
                    if (studentName) {
                        // æ˜¾ç¤ºå­¦ç”Ÿå§“ååŠ "åŒå­¦"ç§°å‘¼
                        studentName.textContent = selectedStudent.name + " åŒå­¦";
                        
                        // å¼ºåˆ¶æ˜¾ç¤ºå­¦ç”ŸåŒºåŸŸ
                        studentDisplay.style.display = 'block';
                        
                        console.log('å­¦ç”Ÿæ•°æ®æ˜¾ç¤ºæˆåŠŸ:', selectedStudent.name);
                    } else {
                        console.error('æœªæ‰¾åˆ°å­¦ç”Ÿå§“åæ˜¾ç¤ºå…ƒç´ ');
                    }
                } else {
                    console.error('æœªæ‰¾åˆ°å­¦ç”Ÿæ˜¾ç¤ºåŒºåŸŸ');
                }
            } else {
                console.log('æœªæ‰¾åˆ°æœ‰æ•ˆçš„å­¦ç”Ÿæ•°æ®');
            }
        };
    </script>
    <script>

async function getAIAdvice() {
    const adviceContainer = document.getElementById('aiAdviceContainer');
    const adviceContent = document.getElementById('aiAdviceContent');
    const loadingSpinner = document.getElementById('aiLoading');
    
    // æ˜¾ç¤ºåŠ è½½åŠ¨ç”»
    adviceContainer.style.display = 'block';
    adviceContent.innerHTML = '';
    loadingSpinner.style.display = 'block';
    

    // ä¼˜åŒ–åçš„æç¤ºè¯ï¼ˆæ¯æ¡å»ºè®®30å­—å·¦å³ï¼‰
    const prompt = `æ ¹æ®ç­”é¢˜ç»“æœç”¨ä¸­æ–‡ç»™å‡º3æ¡ç®€æ˜å­¦ä¹ å»ºè®®ï¼ˆæ¯æ¡30å­—å·¦å³ï¼‰ï¼š
å¾—åˆ†ï¼š${score}/100 | é”™è¯¯ï¼š${wrongAnswers.length}é“ | éš¾åº¦ï¼š${getDifficultyName(currentDifficulty)}

è¦æ±‚ï¼š
1. ç›´æ¥æŒ‡å‡ºä¸»è¦è–„å¼±ç¯èŠ‚
2. ç»™å‡ºå…·ä½“æ”¹è¿›å»ºè®®
3. æ¨èå®ç”¨å­¦ä¹ èµ„æº
4. è¯­è¨€ç²¾ç‚¼ï¼Œé¿å…ç©ºè¯

æ ¼å¼ç¤ºä¾‹ï¼š
1. éœ€åŠ å¼ºï¼šå¤è¯—æ„è±¡åˆ†æï¼ˆé”™3é¢˜ï¼‰
2. å»ºè®®ï¼šæ¯å¤©å¯¹æ¯”åˆ†æ2ç»„ç›¸ä¼¼æ„è±¡
3. èµ„æºï¼šè§‚çœ‹ã€Šå”è¯—æ„è±¡ç²¾è®²ã€‹è§†é¢‘è¯¾`;


    try {
        const response = await fetch("https://2af4a66a.r7.cpolar.top/api/generate", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({
                model: "llama3.1:8b",
                prompt: prompt,
                stream: true
            }),
        });

        if (!response.ok) throw new Error("è¯·æ±‚å¤±è´¥");
        
        const reader = response.body.getReader();
        const decoder = new TextDecoder();
        let fullResponse = "";
        
        loadingSpinner.style.display = 'none';
        
        while (true) {
            const { done, value } = await reader.read();
            if (done) break;
            
            const chunk = decoder.decode(value);
            const lines = chunk.split('\n').filter(line => line.trim() !== '');
            
            for (const line of lines) {
                try {
                    const data = JSON.parse(line);
                    fullResponse += data.response;
                    // æ ¼å¼åŒ–æ˜¾ç¤ºï¼Œä¿ç•™æ¢è¡Œ
                    adviceContent.innerHTML = fullResponse.replace(/\n/g, '<br>');
                } catch (e) {
                    console.error("è§£æJSONå¤±è´¥:", e);
                }
            }
        }
    } catch (error) {
        loadingSpinner.style.display = 'none';
        adviceContent.innerHTML = `è·å–å»ºè®®å¤±è´¥: ${error.message}<br>è¯·æ£€æŸ¥OllamaæœåŠ¡æ˜¯å¦è¿è¡Œ`;
        console.error("è°ƒç”¨Ollamaå¤±è´¥:", error);
    }
}


// è°ƒç”¨ Ollama ç”Ÿæˆè§£æ
async function askAIForExplanation() {
    const currentQ = questionBank[currentQuestion];
    
    // è·å–å½“å‰æ˜¾ç¤ºçš„é€‰é¡¹é¡ºåº
    const displayedOptions = [];
    const options = document.querySelectorAll('.option');
    options.forEach(opt => {
        const optionText = opt.textContent.trim().substring(2); // å»é™¤"A. "è¿™æ ·çš„å‰ç¼€
        displayedOptions.push(optionText);
    });
    
    // æ‰¾åˆ°å½“å‰æ˜¾ç¤ºçš„æ­£ç¡®ç­”æ¡ˆå­—æ¯
    let correctDisplayLetter = '';
    for (const key in currentQ.optionsMapping) {
        if (currentQ.optionsMapping[key] === currentQ.answer) {
            correctDisplayLetter = key;
            break;
        }
    }
    
    const prompt = `è¯·ç”¨ä¸­æ–‡è§£æä»¥ä¸‹é¢˜ç›®ï¼Œè¦æ±‚ï¼š
1. å…ˆç”¨1å¥è¯è¯´æ˜æ­£ç¡®ç­”æ¡ˆï¼ˆæ ‡æ³¨é€‰é¡¹å­—æ¯ï¼‰
2. å†ç”¨1-2å¥è¯è§£é‡ŠåŸå› 
3. è¯­è¨€ç”ŸåŠ¨æ˜“æ‡‚ï¼Œé€‚åˆå­¦ç”Ÿç†è§£
4. æ€»å­—æ•°æ§åˆ¶åœ¨50å­—å·¦å³

é¢˜ç›®ï¼š${currentQ.question}
é€‰é¡¹ï¼š${displayedOptions.map((opt, i) => `${String.fromCharCode(65 + i)}. ${opt}`).join(" ")}
æ­£ç¡®ç­”æ¡ˆï¼š${correctDisplayLetter}

ç¤ºä¾‹æ ¼å¼ï¼š
"æ­£ç¡®ç­”æ¡ˆæ˜¯Bã€‚å› ä¸ºè¯—ä¸­'ç–‘'å­—è¡¨ç¤º'å¥½åƒ'ï¼ŒæŠŠæœˆå…‰æ¯”ä½œç™½éœœï¼Œè¿™æ˜¯å¸¸è§çš„æ¯”å–»æ‰‹æ³•ã€‚"`;

    const aiTip = document.getElementById('answerTip');
    aiTip.innerHTML = `<div class="loading-spinner"></div> AI æ€è€ƒä¸­...`;

    try {
        const response = await fetch("https://2af4a66a.r7.cpolar.top/api/generate", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({
                model: "llama3.1:8b",
                prompt: prompt,
                stream: true,
            }),
        });

        if (!response.ok) {
            throw new Error(`HTTPé”™è¯¯! çŠ¶æ€ç : ${response.status}`);
        }

        const reader = response.body.getReader();
        const decoder = new TextDecoder();
        let fullResponse = "ğŸ¤– AI è§£æï¼š";

        while (true) {
            const { done, value } = await reader.read();
            if (done) break;
            
            const chunk = decoder.decode(value);
            const lines = chunk.split('\n').filter(line => line.trim() !== '');
            
            for (const line of lines) {
                try {
                    const data = JSON.parse(line);
                    fullResponse += data.response;
                    aiTip.innerHTML = fullResponse;
                } catch (e) {
                    console.error("è§£æJSONå¤±è´¥:", e);
                }
            }
        }
    } catch (error) {
        aiTip.innerHTML = `AIè§£æå¤±è´¥: ${error.message}`;
        console.error("è°ƒç”¨Ollamaå¤±è´¥:", error);
    }
}

    // éŸ³ä¹æ§åˆ¶åŠŸèƒ½
    const musicControl = document.getElementById('musicControl');
    const bgm = document.getElementById('bgm');

    musicControl.addEventListener('click', () => {
        if (bgm.paused) {
            bgm.play();
            musicControl.classList.remove('muted');
        } else {
            bgm.pause();
            musicControl.classList.add('muted');
        }
    });
   // æ·»åŠ å­¦ç”Ÿæ•°æ®æ˜¾ç¤ºåŠŸèƒ½
   document.addEventListener('DOMContentLoaded', function() {
        // è·å–å­¦ç”Ÿæ•°æ®
        let selectedStudent = null;
        
        // å°è¯•ä»StudentDataè·å–æ•°æ®
        if (typeof StudentData !== 'undefined' && StudentData.getStudent) {
            selectedStudent = StudentData.getStudent();
        }
        
        // å¦‚æœStudentDataæœªå®šä¹‰æˆ–æœªè·å–åˆ°æ•°æ®ï¼Œåˆ™ç›´æ¥ä»localStorageè·å–
        if (!selectedStudent || !selectedStudent.name) {
            const storedStudent = localStorage.getItem('selectedStudent');
            if (storedStudent) {
                try {
                    selectedStudent = JSON.parse(storedStudent);
                } catch (e) {
                    console.error('è§£æå­¦ç”Ÿæ•°æ®å¤±è´¥:', e);
                }
            }
        }
        
        // å¦‚æœæœ‰å­¦ç”Ÿæ•°æ®ï¼Œæ˜¾ç¤ºå­¦ç”ŸåŒºåŸŸ
        if (selectedStudent && selectedStudent.name) {
            const studentDisplay = document.getElementById('studentDisplay');
            if (studentDisplay) {
                const studentName = studentDisplay.querySelector('.student-name');
                if (studentName) {
                    // æ˜¾ç¤ºå­¦ç”Ÿå§“ååŠ "åŒå­¦"ç§°å‘¼
                    studentName.textContent = selectedStudent.name + " åŒå­¦";
                    
                    // æ˜¾ç¤ºå­¦ç”ŸåŒºåŸŸ
                    studentDisplay.style.display = 'block';
                    
                    console.log('å­¦ç”Ÿæ•°æ®åŠ è½½æˆåŠŸ:', selectedStudent.name);
                } else {
                    console.error('æœªæ‰¾åˆ°å­¦ç”Ÿå§“åæ˜¾ç¤ºå…ƒç´ ');
                }
            } else {
                console.error('æœªæ‰¾åˆ°å­¦ç”Ÿæ˜¾ç¤ºåŒºåŸŸ');
            }
        } else {
            console.log('æœªæ‰¾åˆ°æœ‰æ•ˆçš„å­¦ç”Ÿæ•°æ®');
        }
    });
    </script>

    <!-- 1. æŒ‰é’®éŸ³æ•ˆ -->
    <audio id="btnSound" src="btn.mp3" style="display:none"></audio>
    <!-- 2. æ­£ç¡®éŸ³æ•ˆ -->
    <audio id="correctSound" src="correct.mp3" style="display:none"></audio>
    <!-- 3. é”™è¯¯éŸ³æ•ˆ -->
    <audio id="wrongSound" src="wrong.mp3" style="display:none"></audio>
    <!-- 4. æ‰­è›‹å¼€èŠ±éŸ³æ•ˆ -->
    <audio id="gachaSound" src="gacha.mp3" style="display:none"></audio>
        <!-- æ–°å¢éŸ³æ•ˆ -->
        <audio id="comboSound" src="combo.mp3" style="display:none"></audio>
        <audio id="achievementSound" src="achievement.mp3" style="display:none"></audio>
        <audio id="fireworkSound" src="firework.mp3" style="display:none"></audio>
        <audio id="coinSound" src="coin.mp3" style="display:none"></audio>
    

    <!-- æ‰­è›‹è®¡æ•°å™¨ -->
    <div class="gacha-counter">
        <div class="gacha-icon"></div>
        <span id="gachaCount">0</span>
    </div>

    <!-- å¼€å§‹ç•Œé¢ -->
    <div id="startScreen" class="screen">
        <h1 class="title">æ‰­è›‹å¤§æŒ‘æˆ˜</h1>
<button class="export-btn" onclick="window.open('è¯¾å ‚äº’åŠ©ç­çº§ç³»ç»Ÿv2.0.html', '_blank')" style="margin-top: 10px; background: #722ed1;">
   è¯¾å ‚äº’åŠ©ç­çº§ç³»ç»Ÿ
</button>
<button class="export-btn" onclick="window.open('é¢˜åº“ç®¡ç†å™¨.html', '_blank')" style="margin-top: 10px; background: #1890ff;">
    é¢˜åº“ç®¡ç†å™¨
 </button><br>

        <div class="button-container">
            <button class="bubble-btn" onclick="selectDifficulty('easy')">ç®€å•æ¨¡å¼</button>
            <button class="bubble-btn" onclick="selectDifficulty('medium')">ä¸­ç­‰æ¨¡å¼</button>
            <button class="bubble-btn" onclick="selectDifficulty('hard')">å›°éš¾æ¨¡å¼</button>
        </div>
        <div class="difficulty-description" id="difficultyDesc">
            <span>ğŸ‘‰ é€‰æ‹©éš¾åº¦ç­‰çº§å¼€å§‹æ¸¸æˆ</span>
        </div>
    </div>

    <!-- ç­”é¢˜ç•Œé¢ -->
    <div id="quizScreen" class="screen">
        <h2 class="quiz-title">ğŸŒŸ ç­”é¢˜é›†è›‹å¤§ä½œæˆ˜</h2>
        <div class="progress-container">
            <div class="progress-text" id="progressText">ç¬¬1/10é¢˜</div>
            <div class="progress-bar">
                <div class="progress" id="progress"></div>
            </div>
        </div>
        <div class="question" id="question"></div>
        <div id="options"></div>
        <div id="answerTip" class="answer-tip"></div>
        <!-- æ–°å¢ AI è§£ææŒ‰é’® -->
        <button id="aiExplainBtn" class="bubble-btn" onclick="askAIForExplanation()" style="margin: 10px auto; display: none;">
             ğŸ¤– AI è§£ææœ¬é¢˜
        </button>
        <button id="backBtn" class="bubble-btn" onclick="backToStart()">è¿”å›</button>
        <button id="nextBtn" class="bubble-btn" onclick="nextQuestion()">ä¸‹ä¸€é¢˜</button>
    </div>

    <!-- ç»“ç®—ç•Œé¢ -->
    <div id="resultScreen" class="screen">
        <div class="score-emoji" id="scoreEmoji"></div>
        <div class="score-text" id="scoreText">100</div>
        <div class="score-line"></div>
        <div class="gacha-result">
            <div class="gacha-result-box" onclick="openGacha()">
                <div class="gacha-icon" style="width:60px;height:60px;"></div>
                <span style="margin-left:15px;font-size:1.5em;">Ã—</span>
                <span id="resultGachaCount" style="font-size:2em;margin-left:10px;">0</span>
            </div>
        </div>
        <div class="gacha-open-area" id="gachaOpenArea"></div>
        <div class="button-container">
            <button id="viewWrongBtn" class="bubble-btn" onclick="showWrong()">æŸ¥çœ‹é”™é¢˜</button>
            <button class="bubble-btn" onclick="getAIAdvice()">è·å–AIå­¦ä¹ å»ºè®®</button>  <!-- æ–°å¢æŒ‰é’® -->
            <button class="bubble-btn" onclick="restartQuiz()">é‡æ–°å¼€å§‹</button>
        </div>

        <div id="aiAdviceContainer" style="display:none; margin-top:20px; padding:20px; background:rgba(255,255,255,0.9); border-radius:15px;">
            <h3 style="color:#ff69b4; text-align:center;">AIå­¦ä¹ å»ºè®®</h3>
            <div id="aiAdviceContent" style="margin-top:10px;"></div>
            <div class="loading-spinner" id="aiLoading" style="margin:20px auto; display:none;"></div>
        </div>

    </div>

    <!-- é”™é¢˜ç•Œé¢ -->
    <div id="wrongScreen" class="screen">
        <h2 class="title">é”™é¢˜å›é¡¾</h2>
        <div class="wrong-list" id="wrongList"></div>
        <div class="button-container">
            <button class="bubble-btn" onclick="backToResult()">ç¡®å®š</button>
        </div>
    </div>

    <script>
        let combo = 0;
        let maxCombo = 0;
        let currentQuestion = 0;
        let score = 0;
        let wrongAnswers = [];
        let isAnswered = false;
        let gachaCount = 0;
        let collectedGachas = [];
        let currentDifficulty = 'medium'; // é»˜è®¤éš¾åº¦
        let timeLimit = 0; // ç­”é¢˜æ—¶é—´é™åˆ¶ï¼ˆæ¯«ç§’ï¼‰ï¼Œ0è¡¨ç¤ºæ— é™åˆ¶
        let timer = null; // è®¡æ—¶å™¨
        let timeRemaining = 0; // å‰©ä½™æ—¶é—´

        // éš¾åº¦ç›¸å…³é…ç½®
        const difficultySettings = {
            easy: {
                timeLimit: 0, // æ— æ—¶é—´é™åˆ¶
                scorePerQuestion: 10,
                description: 'ç®€å•æ¨¡å¼ï¼šæ— æ—¶é—´é™åˆ¶ï¼ŒåŸºç¡€é¢˜ç›®ï¼Œé€‚åˆåˆå­¦è€…ã€‚'
            },
            medium: {
                timeLimit: 20000, // 20ç§’
                scorePerQuestion: 15,
                description: 'ä¸­ç­‰æ¨¡å¼ï¼š20ç§’ç­”é¢˜æ—¶é—´ï¼Œä¸­ç­‰éš¾åº¦é¢˜ç›®ï¼Œé€‚åˆæœ‰ä¸€å®šåŸºç¡€çš„å­¦ä¹ è€…ã€‚'
            },
            hard: {
                timeLimit: 10000, // 10ç§’
                scorePerQuestion: 20,
                description: 'å›°éš¾æ¨¡å¼ï¼š10ç§’ç­”é¢˜æ—¶é—´ï¼Œé«˜éš¾åº¦é¢˜ç›®ï¼Œé€‚åˆæŒ‘æˆ˜è‡ªæˆ‘çš„é«˜æ‰‹ã€‚'
            }
        };
        
        // æˆå°±ç³»ç»Ÿ
        let achievements = [
            { id: 'combo3', title: 'è¿å‡»å¤§å¸ˆ', description: 'è¾¾æˆ3è¿å‡»', unlocked: false, icon: 'ğŸ”¥' },
            { id: 'combo5', title: 'æ— æ•Œè¿å‡»', description: 'è¾¾æˆ5è¿å‡»', unlocked: false, icon: 'âš¡' },
            { id: 'perfect', title: 'å®Œç¾ç­”é¢˜', description: 'å…¨éƒ¨ç­”å¯¹', unlocked: false, icon: 'ğŸŒŸ' },
            { id: 'gacha5', title: 'æ‰­è›‹æ”¶è—å®¶', description: 'æ”¶é›†5ä¸ªæ‰­è›‹', unlocked: false, icon: 'ğŸ' },
            { id: 'speed', title: 'é—ªç”µç­”é¢˜', description: '5ç§’å†…ç­”å¯¹é¢˜ç›®', unlocked: false, icon: 'â±ï¸' },
            { id: 'hardMode', title: 'æŒ‘æˆ˜å¤§å¸ˆ', description: 'å®Œæˆå›°éš¾æ¨¡å¼', unlocked: false, icon: 'ğŸ†' }
        ];
        
        // ç®€å•éš¾åº¦é¢˜åº“
        let easyQuestions = [    {
      "question": "ç–‘æ˜¯åœ°ä¸Šéœœä¸­â€œç–‘â€å­—çš„æ­£ç¡®è§£é‡Šæ˜¯ã€‚",
      "options": ["æ€€ç–‘", "å¥½åƒ", "ç¡®å®š", "å¦å®š"],
      "answer": "B",
      "explanation": "æ­¤å¤„ç”¨æ¯”å–»æ‰‹æ³•ï¼Œå°†æœˆå…‰æ¯”ä½œç™½éœœï¼Œ\"ç–‘\"åœ¨æ­¤å¤„æ„ä¸º\"å¥½åƒ\"ï¼Œè¡¨è¾¾è¯—äººå¯¹æœˆå…‰çš„è¯—æ„è”æƒ³è€Œéå®é™…æ€€ç–‘ã€‚"
    },
    {
      "question": "ä¸¾å¤´æœ›æ˜æœˆä¸­â€œä¸¾å¤´â€çš„æ„æ€æ˜¯ï¼š",
      "options": ["æŠ¬å¤´", "ä½å¤´", "æ‘‡å¤´", "å›å¤´"],
      "answer": "A",
      "explanation": "\"ä¸¾å¤´\"æ˜¯å¤æ±‰è¯­è¡¨è¾¾ï¼Œ\"ä¸¾\"å³æŠ¬èµ·ï¼Œç”ŸåŠ¨å±•ç°è¯—äººä»æ²‰æ€åˆ°ä»°æœ›çš„è¿ç»­åŠ¨ä½œã€‚"
    },
    {
      "question": "ã€Šé™å¤œæ€ã€‹å±äºä»¥ä¸‹å“ªç§è¯—æ­Œä½“è£ï¼Ÿ",
      "options": ["ä¸ƒè¨€å¾‹è¯—", "äº”è¨€ç»å¥", "ä¹åºœè¯—", "å®‹è¯"],
      "answer": "B",
      "explanation": "å…¨è¯—å››å¥ï¼Œæ¯å¥äº”å­—ï¼Œç¬¦åˆç»å¥\"çŸ­å°ç²¾æ‚ã€å³æ™¯æŠ’æƒ…\"çš„ç‰¹ç‚¹ï¼Œæ˜¯äº”è¨€ç»å¥çš„å…¸èŒƒä¹‹ä½œã€‚"
    },
    {
      "question": "è¯—äººâ€œä½å¤´æ€æ•…ä¹¡â€æ—¶ï¼Œæœ€å¯èƒ½è”æƒ³åˆ°çš„æ˜¯ï¼š",
      "options": ["æ•…ä¹¡çš„ç¹åè¡—é“", "æ•…ä¹¡çš„äº²äººæˆ–å¾€äº‹", "æ•…ä¹¡çš„æˆ˜äº‰åœºæ™¯", " æ•…ä¹¡çš„æœå»·æ”¿äº‹"],
      "answer": "B",
      "explanation": "æç™½æ­¤æ—¶èº«å¤„å¼‚ä¹¡ï¼Œç§‹å¤œå¯‚é™çš„ç¯å¢ƒæœ€æ˜“å¼•å‘å¯¹äº²äººæœ‹å‹å’Œå¾€æ˜”ç”Ÿæ´»çš„æ€å¿µã€‚"
    },
    {
      "question": "è¯—ä¸­â€œæ˜æœˆâ€çš„æ„è±¡å¸¸è¢«ç”¨æ¥è±¡å¾ï¼š",
      "options": ["å­¤ç‹¬ä¸æ¸…å†·", "å›¢åœ†ä¸æ€å¿µ", "æ—¶é—´æµé€", "è‡ªç„¶ä¹‹ç¾"],
      "answer": "B",
      "explanation": "æ˜æœˆé«˜æ‚¬æ™®ç…§çš„ç‰¹æ€§ï¼Œä½¿å…¶æˆä¸ºè¿æ¥æ¸¸å­ä¸æ•…ä¹¡çš„æƒ…æ„Ÿçº½å¸¦ï¼Œæ‰¿è½½ç€å›¢åœ†çš„æœŸç›¼ã€‚"
    },
    {
      "question": "ä»¥ä¸‹å“ªå¥è¯—ä¸æ˜¯æç™½æ‰€ä½œï¼Ÿ",
      "options": ["é£æµç›´ä¸‹ä¸‰åƒå°º", "æ¡ƒèŠ±æ½­æ°´æ·±åƒå°º", "ä¸¤ä¸ªé»„é¹‚é¸£ç¿ æŸ³", "æœè¾ç™½å¸å½©äº‘é—´"],
      "answer": "C",
      "explanation": "\"ä¸¤ä¸ªé»„é¹‚é¸£ç¿ æŸ³\"å‡ºè‡ªæœç”«ã€Šç»å¥ã€‹ï¼Œä¸æç™½è±ªæ”¾é£æ ¼å½¢æˆé²œæ˜å¯¹æ¯”ã€‚"
    },
    {
      "question": "æç™½åˆ›ä½œã€Šé™å¤œæ€ã€‹æ—¶æœ€å¯èƒ½èº«å¤„ï¼š",
      "options": ["å®¶ä¹¡çš„å®…é™¢ä¸­", "å¼‚ä¹¡çš„å®¢æ ˆé‡Œ", "çš‡å®«çš„å®´å¸­ä¸Š", "è¾¹å¡çš„æˆ˜åœºä¸­"],
      "answer": "B",
      "explanation": "åˆ›ä½œèƒŒæ™¯ä¸ºè¯—äºº26å²æ—…å±…æ‰¬å·æ‚£ç—…æœŸé—´ï¼Œå®¢æ ˆçš„å­¤å¯‚ç¯å¢ƒå‚¬ç”Ÿäº†æ€ä¹¡ä¹‹æƒ…ã€‚"
    },
    {
      "question": "å…¨è¯—æœªç›´æ¥æåˆ°â€œç§‹â€ï¼Œå´è®©äººè”æƒ³åˆ°ç§‹å¤œï¼Œæ˜¯å› ä¸ºï¼š",
      "options": ["\"éœœ\"å¤šå‡ºç°äºç§‹å­£", "\"æ˜æœˆ\"ä»£è¡¨ç§‹å¤©", "\"åºŠ\"æ˜¯ç§‹æ—¥å®¶å…·", "\"æ•…ä¹¡\"åœ¨ç§‹å¤©"],
      "answer": "A",
      "explanation": "éœœçš„æ„è±¡å…·æœ‰å¼ºçƒˆå­£èŠ‚æ€§æš—ç¤ºï¼Œå¤ä»£\"ç–‘éœœ\"çš„æå†™å¤šä¸ç§‹å¤œç›¸å…³è”ã€‚"
    },
    {
      "question": "å…³äºã€Šé™å¤œæ€ã€‹çš„ç‰ˆæœ¬ï¼Œæ­£ç¡®çš„æ˜¯ï¼š",
      "options": ["é¦–å¥ä¸ºâ€œåºŠå‰æ˜æœˆå…‰â€", "æç™½æœ€åˆå†™äºå®‹ä»£", "è¯—ä¸­â€œåºŠâ€æŒ‡ç°ä»£ç¡åºŠ", "å…¨è¯—æŠ¼ä»„å£°éŸµ"],
      "answer": "A",
      "explanation": "æ˜ä»£ç‰ˆæœ¬å§‹ä½œ\"åºŠå‰æ˜æœˆå…‰\"ï¼Œè™½éæç™½åŸç¨¿ï¼Œä½†å·²æˆä¸ºæœ€å¹¿ä¸ºæµä¼ çš„æ ‡å‡†ç‰ˆæœ¬ã€‚"
    },
    {
      "question": "ã€Šé™å¤œæ€ã€‹çš„è¯­è¨€ç‰¹ç‚¹æ˜¯ï¼š",
      "options": ["åä¸½ç¹å¤", "æœ´å®è‡ªç„¶", "å¹½é»˜è®½åˆº", "è‰°æ·±æ™¦æ¶©"],
      "answer": "B",
      "explanation": "å…¨è¯—ç”¨æœ€æµ…æ˜¾çš„20ä¸ªå­—æ„å»ºæ·±è¿œæ„å¢ƒï¼Œä½“ç°æç™½\"æ¸…æ°´å‡ºèŠ™è“‰\"çš„è¯­è¨€ç¾å­¦ã€‚"
    },
    {
      "question": "æç™½è¢«åä¸–ç§°ä¸ºï¼š",
      "options": ["è¯—åœ£", "è¯—ä»™", "è¯—ä½›", "è¯—é¬¼"],
      "answer": "B",
      "explanation": "å› å…¶è¯—æ­Œå……æ»¡å¥‡å¹»æƒ³è±¡å’Œé£˜é€¸æ°”è´¨ï¼Œè´ºçŸ¥ç« èµå…¶\"è°ªä»™äºº\"ï¼Œæ•…å¾—\"è¯—ä»™\"é›…å·ã€‚"
    }
  

        ];

        // ä¸­ç­‰éš¾åº¦é¢˜åº“
        let mediumQuestions = [
        {
      "question": "ã€Šé™å¤œæ€ã€‹ä¸­â€œä¸¾å¤´æœ›æ˜æœˆâ€ä¸â€œä½å¤´æ€æ•…ä¹¡â€å½¢æˆäº†ä»€ä¹ˆä¿®è¾æ‰‹æ³•ï¼Ÿ",
      "options": ["å¯¹å¶", "æ’æ¯”", "åå¤", "è®¾é—®"],
      "answer": "A",
      "explanation": "ä¸¤å¥åœ¨ç»“æ„ä¸Šå¯¹ä»—å·¥æ•´ï¼Œ\"ä¸¾å¤´\"å¯¹\"ä½å¤´\"ï¼Œ\"æœ›æ˜æœˆ\"å¯¹\"æ€æ•…ä¹¡\"ï¼Œå½¢æˆç©ºé—´åŠ¨ä½œä¸å¿ƒç†æ´»åŠ¨çš„å¯¹ç§°ç¾ã€‚"
    },
    {
      "question": "ä¸‹åˆ—å“ªä¸ªæˆè¯­ä¸æç™½çš„ã€Šé™å¤œæ€ã€‹ä¸»é¢˜æœ€æ¥è¿‘ï¼Ÿ",
      "options": ["ä¹ä¸æ€èœ€", "æ€å½’å…¶é›Œ", "æ€å¦‚æ¶Œæ³‰", "æ€å¿µæ•…ä¹¡"],
      "answer": "D",
      "explanation": "å…¨è¯—å›´ç»•\"æ€ä¹¡\"ä¸»é¢˜å±•å¼€ï¼Œ\"æ€å¿µæ•…ä¹¡\"ç›´æ¥å‘¼åº”è¯—ä¸­\"ä½å¤´æ€æ•…ä¹¡\"çš„æ ¸å¿ƒæƒ…æ„Ÿã€‚"
    },
    {
      "question": "ã€Šé™å¤œæ€ã€‹ä¸­â€œåºŠå‰æ˜æœˆå…‰â€çš„â€œåºŠâ€æŒ‡çš„æ˜¯ä»€ä¹ˆï¼Ÿ",
      "options": ["ç¡è§‰çš„åºŠ", "å¤ä»£åå§çš„åºŠæ¦»", "çª—å°", "é—¨æ§›"],
      "answer": "B",
      "explanation": "å”ä»£çš„\"åºŠ\"æŒ‡å¯åå¯å§çš„å®¶å…·ï¼Œç»“åˆå…¨è¯—æ„å¢ƒï¼Œåº”ç†è§£ä¸ºè¯—äººèµ·èº«ååœ¨åºŠæ¦»ä¸Šçš„çŠ¶æ€ã€‚"
    },
    {
      "question": "ã€Šé™å¤œæ€ã€‹æ˜¯å“ªä¸ªæœä»£çš„ä½œå“ï¼Ÿ",
      "options": ["æ±‰ä»£", "å”ä»£", "å®‹ä»£", "å…ƒä»£"],
      "answer": "B",
      "explanation": "æç™½ï¼ˆ701å¹´ï¼762å¹´ï¼‰æ˜¯ç››å”è¯—äººï¼Œæ­¤è¯—åˆ›ä½œäºå¼€å…ƒåå››å¹´ï¼ˆ726å¹´ï¼‰ï¼Œæ­£å€¼å”æœé¼ç››æ—¶æœŸã€‚"
    },
    {
      "question": "ã€Šé™å¤œæ€ã€‹çš„åˆ›ä½œèƒŒæ™¯æœ€å¯èƒ½æ˜¯ï¼š",
      "options": ["è¾¹å¡å¾æˆ˜", "å®«å»·å®´ä¼š", "æ—…é€”æ€ä¹¡", "å±±æ°´æ¸¸è§ˆ"],
      "answer": "C",
      "explanation": "æ ¹æ®å¹´è°±è®°è½½ï¼Œæ­¤è¯—ä½œäºæç™½é¦–æ¬¡ç¦»èœ€æ¼«æ¸¸æœŸé—´ï¼Œåœ¨æ‰¬å·æ—…èˆå…»ç—…æ—¶çš„æ€ä¹¡ä¹‹ä½œã€‚"
    },
    {
      "question": "æç™½è¢«ç§°ä¸ºâ€è¯—ä»™â€œï¼Œä¸ä»–é½åçš„â€è¯—åœ£â€œæ˜¯è°ï¼Ÿ",
      "options": ["æœç”«", "ç™½å±…æ˜“", "ç‹ç»´", "è‹è½¼"],
      "answer": "A",
      "explanation": "æœç”«å› å…³æ³¨ç°å®ã€é£æ ¼æ²‰éƒï¼Œä¸æç™½çš„æµªæ¼«ä¸»ä¹‰å½¢æˆäº’è¡¥ï¼Œè¢«å¹¶ç§°ä¸º\"ææœ\"ã€‚"
    },
    {
      "question": "ã€Šé™å¤œæ€ã€‹å±äºå“ªç§è¯—æ­Œä½“è£ï¼Ÿ",
      "options": ["ä¸ƒè¨€å¾‹è¯—", "äº”è¨€ç»å¥", "ä¸ƒè¨€ç»å¥", "äº”è¨€å¾‹è¯—"],
      "answer": "B",
      "explanation": "å…¨è¯—å…±å››å¥ï¼Œæ¯å¥äº”å­—ï¼ŒæŠ¼å¹³å£°éŸµï¼Œç¬¦åˆäº”è¨€ç»å¥çš„åŸºæœ¬ç‰¹å¾ã€‚"
    },
    {
      "question": "ã€Šé™å¤œæ€ã€‹ä¸­â€ç–‘æ˜¯åœ°ä¸Šéœœâ€œçš„â€ç–‘â€œå­—è¡¨è¾¾äº†è¯—äººçš„ä»€ä¹ˆå¿ƒç†ï¼Ÿ",
      "options": ["æ€€ç–‘", "çŒœæµ‹", "è¯¯è®¤", "å›°æƒ‘"],
      "answer": "C",
      "explanation": "æ­¤å¤„æ˜¯è¯—äººå°†æœˆå…‰é”™è§‰ä¸ºç™½éœœçš„ç¬é—´æ„Ÿå—ï¼Œå±•ç°ä»æœ¦èƒ§åˆ°æ¸…é†’çš„å¿ƒç†å˜åŒ–è¿‡ç¨‹ã€‚"
    },
    {
      "question": "æç™½çš„ã€Šé™å¤œæ€ã€‹åˆ›ä½œäºä»–çš„å“ªä¸ªäººç”Ÿé˜¶æ®µï¼Ÿ",
      "options": ["å°‘å¹´æ—¶æœŸ", "å£®å¹´æ¼«æ¸¸æ—¶æœŸ", "ä»•é€”å¤±æ„æ—¶æœŸ", "æ™šå¹´éšå±…æ—¶æœŸ"],
      "answer": "C",
      "explanation": "åˆ›ä½œæ—¶æç™½å°šæœªè¿›å…¥å®«å»·ï¼Œæ­£å¤„äºæ¼«æ¸¸æ±‚ä»•æœªæœçš„é˜¶æ®µï¼Œå¸¦æœ‰è¿·èŒ«ä¸ä¹¡æ„çš„åŒé‡æƒ…æ„Ÿã€‚"
    },
    {
      "question": "ã€Šé™å¤œæ€ã€‹ä¸­â€æ˜æœˆâ€œæ„è±¡åœ¨ä¸­å›½å¤å…¸è¯—æ­Œä¸­å¸¸å¸¸è±¡å¾ï¼š",
      "options": ["å­¤ç‹¬", "å›¢åœ†", "è‡ªç”±", "æƒåŠ›"],
      "answer": "B",
      "explanation": "æ˜æœˆå…·æœ‰æ—¶ç©ºç©¿è¶Šæ€§ï¼Œæ—¢ç…§æ¸¸å­åˆç…§æ•…ä¹¡ï¼Œæˆä¸ºè·¨è¶Šç©ºé—´çš„æƒ…æ„Ÿè”ç»“ç¬¦å·ã€‚"
    },
    {
      "question": "ã€Šé™å¤œæ€ã€‹çš„è‰ºæœ¯ç‰¹ç‚¹ä¸åŒ…æ‹¬ï¼š",
      "options": ["è¯­è¨€æœ´ç´ ", "æ„å¢ƒä¼˜ç¾", "æƒ…æ„ŸçœŸæŒš", "ç”¨å…¸ç¹å¤"],
      "answer": "D",
      "explanation": "æœ¬è¯—æœ€å¤§ç‰¹ç‚¹å°±æ˜¯ç™½ææ‰‹æ³•ï¼Œå…¨è¯—æ— ä¸€å¤„ç”¨å…¸ï¼Œä»¥æœ€ç®€è¯­è¨€ä¼ è¾¾æœ€æ·±æƒ…æ„Ÿã€‚"
    },
    {
      "question": "ã€Šé™å¤œæ€ã€‹ä¸­â€æ€æ•…ä¹¡â€œè¡¨è¾¾äº†è¯—äººæ€æ ·çš„æƒ…æ„Ÿï¼Ÿ",
      "options": ["å–œæ‚¦", "æ„¤æ€’", "æ€å¿µ", "ææƒ§"],
      "answer": "C",
      "explanation": "åœ¨å¯‚é™æœˆå¤œè§¦å‘çš„ä¹¡æ„ï¼Œæ˜¯ä¸­å›½å¤ä»£æ¸¸å­è¯—ä¸­æœ€å…¸å‹çš„æƒ…æ„Ÿè¡¨è¾¾ã€‚"
    },
    {
      "question": "æç™½ä¸æœç”«çš„å‹è°Šè¢«åäººç§°ä¸ºï¼š",
      "options": ["åˆé¢ˆä¹‹äº¤", "ç®¡é²ä¹‹äº¤", "å¿˜å¹´ä¹‹äº¤", "è«é€†ä¹‹äº¤"],
      "answer": "D",
      "explanation": "ä¸¤äººç›¸å·®11å²å´ç»“ä¸‹æ·±åšå‹è°Šï¼Œç›¸äº’èµ è¯—å¤šé¦–ï¼Œå ªç§°å¿ƒæ„ç›¸é€šçš„è‡³äº¤ã€‚"
    },
    {
      "question": "æç™½çš„è¯—æ­Œé£æ ¼è¢«æ¦‚æ‹¬ä¸ºï¼š",
      "options": ["å«è“„éš½æ°¸", "æ²‰éƒé¡¿æŒ«", "è±ªæ”¾é£˜é€¸", "æ¸…æ–°è‡ªç„¶"],
      "answer": "C",
      "explanation": "å…¶è¯—æƒ³è±¡å¥‡ç‰¹ã€æƒ…æ„Ÿå¥”æ”¾ï¼Œå…·æœ‰\"é»„æ²³ä¹‹æ°´å¤©ä¸Šæ¥\"çš„ç£…ç¤´æ°”åŠ¿ä¸è¶…å‡¡æƒ³è±¡åŠ›ã€‚"
    },
    {
      "question": "ã€Šé™å¤œæ€ã€‹ä¸­â€ä¸¾å¤´æœ›æ˜æœˆâ€œä¸€å¥ä¸­â€œä¸¾å¤´â€çš„å«ä¹‰æ˜¯ï¼š",
      "options": ["æŠ¬èµ·å¤´", "ä»°æœ›", "æ€è€ƒ", "æƒŠè®¶"],
      "answer": "A",
      "explanation": "\"ä¸¾å¤´\"æ˜¯å…·è±¡åŒ–çš„èº«ä½“è¯­è¨€ï¼Œé€šè¿‡åŠ¨ä½œæå†™å±•ç°å¿ƒç†æ´»åŠ¨çš„å˜åŒ–è½¨è¿¹ã€‚"
    }

        ];
        
        // å›°éš¾éš¾åº¦é¢˜åº“
        let hardQuestions = [
        {
      "question": "ã€Šé™å¤œæ€ã€‹åœ¨å”è¯—é€‰æœ¬ã€Šå”è¯—ä¸‰ç™¾é¦–ã€‹ä¸­çš„é¦–å¥æ˜¯ä»€ä¹ˆï¼Ÿ",
      "options": ["åºŠå‰æ˜æœˆå…‰", "çª—å‰æ˜æœˆå…‰", "åºŠå¤´æ˜æœˆå…‰", "çª—å¤–æ˜æœˆå…‰"],
      "answer": "A",
      "explanation": "è™½ç„¶å®‹ä»£ç‰ˆæœ¬æœ‰\"åºŠå‰çœ‹æœˆå…‰\"çš„å¼‚æ–‡ï¼Œä½†ã€Šå”è¯—ä¸‰ç™¾é¦–ã€‹ä½œä¸ºæ¸…ä»£é€‰æœ¬é‡‡ç”¨æµä¼ æœ€å¹¿çš„\"åºŠå‰æ˜æœˆå…‰\"ç‰ˆæœ¬ã€‚"
    },
    {
      "question": "æç™½ã€Šé™å¤œæ€ã€‹çš„çœŸå®åˆ›ä½œåœ°ç‚¹æœ€å¯èƒ½æ˜¯ï¼š",
      "options": ["é•¿å®‰", "æ´›é˜³", "æ‰¬å·", "èœ€åœ°"],
      "answer": "C",
      "explanation": "æ ¹æ®ã€Šæå¤ªç™½å¹´è°±ã€‹ï¼Œæ­¤è¯—ä½œäºå¼€å…ƒåå››å¹´ï¼ˆ726å¹´ï¼‰ç§‹ï¼Œæç™½æ—¶å¹´26å²æ—…å±…æ‰¬å·ï¼Œæ­£å€¼ç—…ä¸­æ€ä¹¡æƒ…åˆ‡ä¹‹æ—¶ã€‚"
    },
    {
      "question": "ã€Šé™å¤œæ€ã€‹ä¸­â€œä¸¾å¤´æœ›æ˜æœˆï¼Œä½å¤´æ€æ•…ä¹¡â€ä½“ç°äº†å“ªç§è‰ºæœ¯æ‰‹æ³•ï¼Ÿ",
      "options": ["åŠ¨é™ç»“åˆ", "è™šå®å¯¹æ¯”", "æƒ…æ™¯äº¤è", "ä»¥ä¸Šéƒ½æ˜¯"],
      "answer": "D",
      "explanation": "æ—¢æœ‰æŠ¬å¤´/ä½å¤´çš„åŠ¨ä½œå¯¹æ¯”ï¼ˆåŠ¨ï¼‰ï¼Œåˆæœ‰æœˆå…‰/ä¹¡æ€çš„è™šå®ç»“åˆï¼Œæœ€ç»ˆè¾¾åˆ°æƒ…æ™¯äº¤èçš„å®Œç¾å¢ƒç•Œã€‚"
    },
    {
      "question": "æç™½çš„ã€Šé™å¤œæ€ã€‹åœ¨æ–‡å­¦å²ä¸Šçš„åœ°ä½æ˜¯ï¼š",
      "options": ["å¼€åˆ›äº†æ–°çš„è¯—æ­Œæµæ´¾", "æˆä¸ºäº”è¨€ç»å¥çš„å…¸èŒƒ", "å½±å“äº†åä¸–æ— æ•°æ–‡äºº", "è¢«èª‰ä¸ºåƒå¤ç»å”±"],
      "answer": "C",
      "explanation": "è™½éå¼€åˆ›æ€§ä½œå“ï¼Œä½†å…¶\"è‡ªç„¶å¤©æˆ\"çš„ç‰¹ç‚¹æˆä¸ºä¹¡æ„è¯—çš„èŒƒå¼ï¼Œå¯¹ä¸­æ—¥éŸ©æ±‰è¯—åˆ›ä½œäº§ç”Ÿæ·±è¿œå½±å“ã€‚"
    },
    {
      "question": "ã€Šé™å¤œæ€ã€‹ä¸­â€œç–‘æ˜¯åœ°ä¸Šéœœâ€ä¸€å¥è¿ç”¨äº†ä»€ä¹ˆä¿®è¾æ‰‹æ³•ï¼Ÿ",
      "options": ["æ¯”å–»", "æ‹Ÿäºº", "å¤¸å¼ ", "å€Ÿä»£"],
      "answer": "A",
      "explanation": "æœ¬ä½“æ˜¯æœˆå…‰ï¼Œå–»ä½“æ˜¯ç§‹éœœï¼Œé€šè¿‡è§†è§‰ç›¸ä¼¼æ€§æ„å»ºæ¯”å–»ï¼Œå¢å¼ºç”»é¢æ„Ÿå’Œæƒ…æ„Ÿæµ“åº¦ã€‚"
    },
    {
      "question": "æç™½çš„ã€Šé™å¤œæ€ã€‹ä¸ä¸‹åˆ—å“ªä½è¯—äººçš„ä½œå“é£æ ¼æœ€ä¸ºæ¥è¿‘ï¼Ÿ",
      "options": ["æœç”«", "ç‹ç»´", "å­Ÿæµ©ç„¶", "ç™½å±…æ˜“"],
      "answer": "C",
      "explanation": "å­Ÿæµ©ç„¶åŒå±å±±æ°´ç”°å›­è¯—æ´¾ï¼Œå…¶ã€Šå®¿å»ºå¾·æ±Ÿã€‹\"é‡æ—·å¤©ä½æ ‘ï¼Œæ±Ÿæ¸…æœˆè¿‘äºº\"åŒæ ·å…·æœ‰ç™½æä¼ æƒ…çš„ç‰¹ç‚¹ã€‚"
    },
    {
      "question": "ã€Šé™å¤œæ€ã€‹ä¸­â€œä½å¤´æ€æ•…ä¹¡â€ä¸€å¥ä¸­çš„â€œæ€â€å­—åœ¨å¤æ±‰è¯­ä¸­çš„è¯æ€§æ˜¯ï¼š",
      "options": ["åè¯", "åŠ¨è¯", "å½¢å®¹è¯", "å‰¯è¯"],
      "answer": "B",
      "explanation": "æ­¤å¤„\"æ€\"è¯»ä½œsÄ«ï¼Œè¡¨ç¤ºæ€å¿µçš„å¿ƒç†åŠ¨ä½œï¼Œåœ¨å¥ä¸­ä½œè°“è¯­åŠ¨è¯ä½¿ç”¨ã€‚"
    },
    {
      "question": "ã€Šé™å¤œæ€ã€‹çš„è‰ºæœ¯æˆå°±ä¸»è¦ä½“ç°åœ¨ï¼š",
      "options": ["æ„å¢ƒæ·±è¿œ", "è¯­è¨€ç²¾ç‚¼", "æƒ…æ„ŸçœŸæŒš", "ä»¥ä¸Šéƒ½æ˜¯"],
      "answer": "D",
      "explanation": "ä¸‰ä½ä¸€ä½“çš„è‰ºæœ¯æˆå°±ï¼š20å­—æ„å»ºå®Œæ•´æ„å¢ƒï¼Œè¯­è¨€æ¯«æ— é›•ç¢ç—•è¿¹ï¼Œæƒ…æ„Ÿå…·æœ‰äººç±»å…±æ€§ã€‚"
    },
    {
      "question": "æç™½çš„ã€Šé™å¤œæ€ã€‹ä¸ä¸‹åˆ—å“ªé¦–è¯—åœ¨ä¸»é¢˜ä¸Šæœ€ä¸ºç›¸ä¼¼ï¼Ÿ",
      "options": ["æœç”«ã€Šæ˜¥æœ›ã€‹", "ç‹ç»´ã€Šé¹¿æŸ´ã€‹", "å­Ÿæµ©ç„¶ã€Šæ˜¥æ™“ã€‹", "ç‹æ˜Œé¾„ã€ŠèŠ™è“‰æ¥¼é€è¾›æ¸ã€‹"],
      "answer": "A",
      "explanation": "è™½ç„¶ã€Šæ˜¥æœ›ã€‹æ›´å®å¤§ï¼Œä½†ä¸¤è¯—éƒ½é€šè¿‡å…·ä½“æ„è±¡ï¼ˆæœˆå…‰/è‰æœ¨ï¼‰è¡¨è¾¾æ·±æ²‰çš„å®¶å›½ä¹‹æ€ã€‚"
    },
    {
      "question": "ã€Šé™å¤œæ€ã€‹ä¸­â€œæ˜æœˆå…‰â€ä¸â€œåœ°ä¸Šéœœâ€åœ¨è‰²å½©ä¸Šå½¢æˆäº†ä»€ä¹ˆå¯¹æ¯”ï¼Ÿ",
      "options": ["æ˜æš—å¯¹æ¯”", "å†·æš–å¯¹æ¯”", "è™šå®å¯¹æ¯”", "åŠ¨é™å¯¹æ¯”"],
      "answer": "A",
      "explanation": "æœˆå…‰çšç™½ä¸ç§‹éœœé“¶ç™½çš„æ˜åº¦ç›¸ä¼¼æ€§å½¢æˆè§†è§‰ç±»æ¯”ï¼Œè€Œæœˆå…‰æ¸…å†·çš„è´¨æ„Ÿä¸éœœçš„å¯’æ„åœ¨è‰²å½©å¿ƒç†å­¦ä¸Šéƒ½å±äºå†·è‰²è°ƒï¼Œæ„æˆåŒé‡å‘¼åº”ã€‚"
    },
    {
      "question": "ã€Šé™å¤œæ€ã€‹ä¸­â€œä¸¾å¤´æœ›æ˜æœˆâ€ä¸€å¥ä¸­â€œæœ›â€å­—çš„å«ä¹‰æ˜¯ï¼š",
      "options": ["çœ‹è§", "ä»°æœ›", "æœŸæœ›", "æ€å¿µ"],
      "answer": "B",
      "explanation": "\"æœ›\"åœ¨æ­¤å¤„æ—¢æ˜¯ç‰©ç†åŠ¨ä½œçš„ä»°æœ›ï¼Œåˆæš—å«å¿ƒç†å±‚é¢çš„æœŸç›¼ï¼Œå…·æœ‰åŒé‡è¯­ä¹‰ã€‚"
    },
    {
      "question": "æç™½çš„ã€Šé™å¤œæ€ã€‹åœ¨ç»“æ„ä¸Šå±äºï¼š",
      "options": ["èµ·æ‰¿è½¬åˆå¼", "æ€»åˆ†æ€»å¼", "å¹¶åˆ—å¼", "é€’è¿›å¼"],
      "answer": "C",
      "explanation": "å››å¥å‘ˆç°å¹³è¡Œå…³ç³»ï¼šå‰ä¸¤å¥å†™æ™¯ï¼Œåä¸¤å¥æŠ’æƒ…ï¼Œå½¢æˆæ„è±¡å¹¶åˆ—è€Œéä¼ ç»Ÿèµ·æ‰¿è½¬åˆç»“æ„ã€‚"
    },
    {
      "question": "ã€Šé™å¤œæ€ã€‹ä¸­â€œåºŠå‰æ˜æœˆå…‰â€ä¸€å¥ä¸­çš„â€œå…‰â€å­—åœ¨è¯—ä¸­çš„ä½œç”¨æ˜¯ï¼š",
      "options": ["ç‚¹æ˜æ—¶é—´", "æ¸²æŸ“æ°›å›´", "å¼•å‡ºä¸‹æ–‡", "ä»¥ä¸Šéƒ½æ˜¯"],
      "answer": "D",
      "explanation": "\"å…‰\"æ—¢è¯´æ˜æ˜¯å¤œæ™šï¼ˆæ—¶é—´ï¼‰ï¼Œè¥é€ æ¸…å†·æ°›å›´ï¼ˆç¯å¢ƒï¼‰ï¼Œåˆä¸ºåç»­\"ç–‘éœœ\"æä¾›è§†è§‰åŸºç¡€ï¼ˆç»“æ„ï¼‰ã€‚"
    },
    {
      "question": "æç™½çš„ã€Šé™å¤œæ€ã€‹ä¸ä¸‹åˆ—å“ªé¦–è¯—åœ¨å†™ä½œæ‰‹æ³•ä¸Šæœ€ä¸ºç›¸ä¼¼ï¼Ÿ",
      "options": ["ç‹ç»´ã€Šå±±å±…ç§‹æšã€‹", "æœç”«ã€Šç™»é«˜ã€‹", "å­Ÿæµ©ç„¶ã€Šå®¿å»ºå¾·æ±Ÿã€‹", "ç‹ä¹‹æ¶£ã€Šç™»é¹³é›€æ¥¼ã€‹"],
      "answer": "D",
      "explanation": "äºŒè€…éƒ½ä½¿ç”¨ç™½ææ‰‹æ³•ï¼Œã€Šç™»é¹³é›€æ¥¼ã€‹\"ç™½æ—¥ä¾å±±å°½\"ä¸\"ä¸¾å¤´æœ›æ˜æœˆ\"åŒæ ·é€šè¿‡ç®€å•æ„è±¡æ„å»ºå®å¤§ç©ºé—´æ„Ÿã€‚"
    },
    {
      "question": "ã€Šé™å¤œæ€ã€‹ä¸­â€œç–‘æ˜¯åœ°ä¸Šéœœâ€ä¸€å¥ä¸­çš„â€œéœœâ€å­—åœ¨è¯—ä¸­çš„ä½œç”¨æ˜¯ï¼š",
      "options": ["æš—ç¤ºå­£èŠ‚", "å½¢å®¹æœˆå…‰", "è±¡å¾å­¤ç‹¬", "ä»¥ä¸Šéƒ½æ˜¯"],
      "answer": "B",
      "explanation": "ä¸»è¦åŠŸèƒ½æ˜¯é€šè¿‡æ¯”å–»æå†™æœˆå…‰è´¨æ„Ÿï¼Œå­£èŠ‚æš—ç¤ºæ˜¯é™„å¸¦æ•ˆæœï¼Œå­¤ç‹¬è±¡å¾éœ€ç»“åˆå…¨è¯—ç†è§£ã€‚"
    }

        ];
        
        // ç­”é¢˜è®¡æ—¶å™¨
        let questionStartTime = 0;
        
        // æ˜¾ç¤ºé¢˜ç›®è§£æ
        function showExplanation(question) {
    
    const existingExplanation = document.querySelector('.explanation');
    if (existingExplanation) existingExplanation.remove();
    
    // å¦‚æœæœ‰è§£æå†…å®¹æ‰æ˜¾ç¤º
    if(question.explanation) {
        const explanationDiv = document.createElement('div');
        explanationDiv.className = 'explanation';
        explanationDiv.innerHTML = `
            <div class="explanation-content">
                <h3>ğŸ“š é¢˜ç›®è§£æ</h3>
                <p>${question.explanation}</p>
            </div>
        `;
        document.getElementById('answerTip').after(explanationDiv);
    }
}
        // åˆ›å»ºèƒŒæ™¯æ°”æ³¡
        function createBubbles() {
            for(let i = 0; i < 15; i++) {
                const bubble = document.createElement('div');
                bubble.className = 'bubble';
                const size = 20 + Math.random() * 60;
                const duration = 5 + Math.random() * 10;
                const tx = -50 + Math.random() * 100;
                const ty = -50 + Math.random() * 100;
                
                bubble.style.cssText = `
                    --size: ${size}px;
                    --duration: ${duration}s;
                    --tx: ${tx}px;
                    --ty: ${ty}px;
                    left: ${Math.random() * 100}vw;
                    top: ${Math.random() * 100}vh;
                    opacity: ${0.1 + Math.random() * 0.3};
                `;
                
                document.body.appendChild(bubble);
            }
        }

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', () => {
            document.getElementById('startScreen').style.display = 'flex';
            createBubbles();
            
            // æ·»åŠ è¿›åº¦æ¡åŠ¨ç”»
            const progressBar = document.querySelector('.progress-bar');
            // ç§»é™¤è¿›åº¦æ¡å…‰æ•ˆåŠ¨ç”»
            // const progressGlow = document.createElement('div');
            // progressGlow.className = 'progress-glow';
            // progressBar.appendChild(progressGlow);
        });

        // é€‰æ‹©éš¾åº¦
        function selectDifficulty(difficulty) {
            document.getElementById('btnSound').play();
            currentDifficulty = difficulty;
            
            // æ›´æ–°éš¾åº¦è¯´æ˜
            const descEl = document.getElementById('difficultyDesc');
            descEl.innerHTML = `<span>${difficultySettings[difficulty].description}</span>`;
            
            // æ˜¾ç¤ºå¼€å§‹æŒ‰é’®
            const buttonContainer = document.querySelector('.button-container');
            buttonContainer.innerHTML = `
                <button class="bubble-btn" onclick="startQuiz()">å¼€å§‹æŒ‘æˆ˜</button>
                <button class="bubble-btn" onclick="showDifficultySelection()">è¿”å›é€‰æ‹©</button>
            `;
        }
        
        // è¿”å›éš¾åº¦é€‰æ‹©
        function showDifficultySelection() {
            document.getElementById('btnSound').play();
            const buttonContainer = document.querySelector('.button-container');
            buttonContainer.innerHTML = `
                <button class="bubble-btn" onclick="selectDifficulty('easy')">ç®€å•æ¨¡å¼</button>
                <button class="bubble-btn" onclick="selectDifficulty('medium')">ä¸­ç­‰æ¨¡å¼</button>
                <button class="bubble-btn" onclick="selectDifficulty('hard')">å›°éš¾æ¨¡å¼</button>
            `;
            
            document.getElementById('difficultyDesc').innerHTML = `<span>ğŸ‘‰ é€‰æ‹©éš¾åº¦ç­‰çº§å¼€å§‹æ¸¸æˆ</span>`;
        }
        
        // å¼€å§‹æŒ‘æˆ˜
        async function startQuiz() {   
            document.getElementById('btnSound').play(); // æŒ‰é’®éŸ³æ•ˆ
            document.getElementById('startScreen').style.display = 'none'; 
            document.getElementById('quizScreen').style.display = 'none'; 
            
            // æ ¹æ®éš¾åº¦é€‰æ‹©é¢˜ç›®
            let filteredQuestions = [];
            
            if (currentDifficulty === 'easy') {
                filteredQuestions = easyQuestions;
            } else if (currentDifficulty === 'medium') {
                filteredQuestions = mediumQuestions;
            } else {
                filteredQuestions = hardQuestions;
            }
            
            // éšæœºé€‰æ‹©10é“é¢˜ç›®
            questionBank = filteredQuestions.sort(() => 0.5 - Math.random()).slice(0, 10);
            
            currentQuestion = 0; 
            score = 0; 
            wrongAnswers = [];
            gachaCount = 0;
            collectedGachas = [];
            combo = 0;
            maxCombo = 0;
            
            // è®¾ç½®æ—¶é—´é™åˆ¶
            timeLimit = difficultySettings[currentDifficulty].timeLimit;
            
            // é‡ç½®æˆå°±
            achievements.forEach(a => a.unlocked = false);
            
            document.getElementById('gachaCount').textContent = '0';
            document.getElementById('gachaOpenArea').innerHTML = '';
            document.getElementById('gachaOpenArea').style.display = 'none';
            
            document.getElementById('quizScreen').style.display = 'block'; 
            showQuestion(); 
        }

        // æ˜¾ç¤ºé¢˜ç›®
        function showQuestion() {
            // æ¯æ¬¡æ˜¾ç¤ºæ–°é¢˜ç›®å‰ç§»é™¤è§£æ
            const existingExplanation = document.querySelector('.explanation');
            if (existingExplanation) existingExplanation.remove();
            isAnswered = false;
            const q = questionBank[currentQuestion];
            
            // æ·»åŠ éš¾åº¦æ ‡ç­¾
            let difficultyBadge = '';
            if (currentDifficulty === 'easy') {
                difficultyBadge = '<span class="difficulty-badge easy-badge">ç®€å•</span>';
            } else if (currentDifficulty === 'medium') {
                difficultyBadge = '<span class="difficulty-badge medium-badge">ä¸­ç­‰</span>';
            } else {
                difficultyBadge = '<span class="difficulty-badge hard-badge">å›°éš¾</span>';
            }
            
            document.getElementById('question').innerHTML = q.question + difficultyBadge;
            document.getElementById('progressText').textContent = `ç¬¬${currentQuestion + 1}/10é¢˜`;
            document.getElementById('progress').style.width = `${(currentQuestion + 1) * 10}%`;
            document.getElementById('answerTip').textContent = '';
            document.getElementById('nextBtn').style.display = 'none';
            document.getElementById('backBtn').style.display = currentQuestion === 0 ? 'block' : 'none';
            
            // å¦‚æœæœ‰æ—¶é—´é™åˆ¶ï¼Œæ·»åŠ è®¡æ—¶å™¨
            if (timeLimit > 0) {
                // åˆ›å»ºæˆ–æ›´æ–°è®¡æ—¶å™¨æ˜¾ç¤º
                if (!document.getElementById('timer')) {
                    const timerEl = document.createElement('div');
                    timerEl.id = 'timer';
                    timerEl.style.cssText = `
                        position: fixed;
                        top: 17px;
                        left: 80px;
                        background: rgba(255,255,255,0.9);
                        padding: 10px 20px;
                        border-radius: 30px;
                        font-size: 1.2em;
                        color: #ff69b4;
                        box-shadow: 0 5px 15px rgba(255,85,153,0.3);
                    `;
                    document.body.appendChild(timerEl);
                }
                
                // é‡ç½®è®¡æ—¶å™¨
                if (timer) clearInterval(timer);
                timeRemaining = timeLimit;
                updateTimer();
                
                timer = setInterval(() => {
                    timeRemaining -= 100;
                    updateTimer();
                    
                    if (timeRemaining <= 0) {
                        clearInterval(timer);
                        if (!isAnswered) {
                            // æ—¶é—´åˆ°ï¼Œè‡ªåŠ¨åˆ¤å®šä¸ºé”™è¯¯
                            document.getElementById('wrongSound').play();
                            document.getElementById('answerTip').textContent = `æ—¶é—´åˆ°ï¼æ­£ç¡®ç­”æ¡ˆï¼š${q.answer}`;
                            document.getElementById('nextBtn').style.display = 'block';
                            
                            // æ ‡è®°é€‰é¡¹
                            const options = document.querySelectorAll('.option');
                            options.forEach((opt, index) => {
                                const optLetter = String.fromCharCode(65 + index);
                                if (optLetter === q.answer) {
                                    opt.classList.add('correct-answer');
                                }
                            });
                            
                            // è®°å½•é”™é¢˜
                            if (!wrongAnswers.some(item => item.question.question === q.question)) {
                                wrongAnswers.push({ question: q, selected: 'timeout' });
                            }
                            
                            isAnswered = true;
                            combo = 0;
                        }
                    }
                }, 100);
            }

            // åˆ›å»ºé€‰é¡¹æ•°ç»„ï¼ŒåŒ…å«é€‰é¡¹å†…å®¹å’ŒåŸå§‹é€‰é¡¹å­—æ¯
            let optionsArray = q.options.map((opt, index) => {
                return {
                    text: opt,
                    originalLetter: String.fromCharCode(65 + index)
                };
            });
            
            // éšæœºæ‰“ä¹±é€‰é¡¹é¡ºåº
            optionsArray = optionsArray.sort(() => 0.5 - Math.random());
            
            // ä¿å­˜å½“å‰é¢˜ç›®çš„é€‰é¡¹æ˜ å°„å…³ç³»ï¼Œç”¨äºåç»­ç­”æ¡ˆåˆ¤æ–­
            q.optionsMapping = {};
            
            let optionsHtml = '';
            optionsArray.forEach((opt, index) => {
                const displayLetter = String.fromCharCode(65 + index);
                // è®°å½•æ˜¾ç¤ºå­—æ¯åˆ°åŸå§‹å­—æ¯çš„æ˜ å°„
                q.optionsMapping[displayLetter] = opt.originalLetter;
                
                optionsHtml += `
                    <label class="option" onclick="selectAnswer('${displayLetter}')">
                        <input type="radio" name="answer" value="${displayLetter}">
                        ${displayLetter}. ${opt.text}
                    </label>
                `;
            });
            document.getElementById('options').innerHTML = optionsHtml;
            
            // è®°å½•å¼€å§‹ç­”é¢˜æ—¶é—´
            questionStartTime = Date.now();

            document.getElementById('aiExplainBtn').style.display = 'block'; // æ–°å¢
        }

        function selectAnswer(selected) {
            if (isAnswered) return;
            isAnswered = true;

            const q = questionBank[currentQuestion];
            const options = document.querySelectorAll('.option');
            const selectedElement = document.querySelector(`input[value="${selected}"]`).parentElement;
            
            // å°†æ˜¾ç¤ºçš„é€‰é¡¹å­—æ¯æ˜ å°„å›åŸå§‹å­—æ¯
            const originalSelected = q.optionsMapping[selected];
            
            // æ·»åŠ ç‚¹å‡»åæ ‡è·å–
            const rect = selectedElement.getBoundingClientRect();
            const clickX = rect.left + rect.width/2;
            const clickY = rect.top + rect.height/2;

            options.forEach((opt, index) => {
                const displayLetter = String.fromCharCode(65 + index);
                const originalLetter = q.optionsMapping[displayLetter];
                
                if (originalLetter === q.answer) {
                    opt.classList.add('correct-answer');
                    if (originalSelected === q.answer) {
                        createParticles(clickX, clickY); // æ­£ç¡®æ—¶ç”Ÿæˆç²’å­
                    }
                }
                if (displayLetter === selected && originalSelected !== q.answer) {
                    opt.classList.add('wrong-answer');
                }
            });

            // æ˜¾ç¤ºé¢˜ç›®è§£æ
            showExplanation(q);

            if (originalSelected === q.answer) {
                // æ­£ç¡®æ—¶ç§»é™¤è§£ææ˜¾ç¤º
                const existingExplanation = document.querySelector('.explanation');
                if (existingExplanation) existingExplanation.remove();
        
                combo++;
                maxCombo = Math.max(maxCombo, combo);
                showComboText();
                document.getElementById('correctSound').play();
                createGachaAnimation();
                collectedGachas.push(currentQuestion);
                
                // æ ¹æ®éš¾åº¦è·å–åˆ†æ•°
                score += difficultySettings[currentDifficulty].scorePerQuestion;
                document.getElementById('answerTip').textContent = 'å›ç­”æ­£ç¡®ï¼';
                
                // æ£€æŸ¥ç­”é¢˜é€Ÿåº¦æˆå°±
                const answerTime = (Date.now() - questionStartTime) / 1000;
                if (answerTime < 5) {
                    unlockAchievement('speed');
                }
                
                // æ£€æŸ¥è¿å‡»æˆå°±
                if (combo >= 3) unlockAchievement('combo3');
                if (combo >= 5) unlockAchievement('combo5');
                
                // é‡‘å¸é›¨æ•ˆæœ
                createCoinRain();
                
                setTimeout(nextQuestion, 1000);
            } else {
                // é”™è¯¯æ—¶æ˜¾ç¤ºè§£æ
                showExplanation(q);
                combo = 0;
                document.getElementById('wrongSound').play();
                // æ‰¾åˆ°æ­£ç¡®é€‰é¡¹çš„æ˜¾ç¤ºå­—æ¯
                const correctDisplayLetter = Object.keys(q.optionsMapping).find(
                key => q.optionsMapping[key] === q.answer);
                document.getElementById('answerTip').textContent = `æ­£ç¡®ç­”æ¡ˆï¼š${correctDisplayLetter}`;
                document.getElementById('nextBtn').style.display = 'block';
                if (!wrongAnswers.some(item => item.question.question === q.question)) {
                    wrongAnswers.push({ question: q, selected: originalSelected });
                }
            }
        }

        // æ–°å¢è¿å‡»æç¤ºå‡½æ•°
        function showComboText() {
            const comboEl = document.createElement('div');
            comboEl.className = 'combo-text';
            
            if (combo > 1) {
                comboEl.textContent = `è¿å‡» x${combo} ğŸ‰`;
                if (combo > 2) document.getElementById('comboSound').play();
            } else {
                comboEl.textContent = 'å®Œç¾ï¼';
            }
            
            if (combo > 3) {
                comboEl.style.color = '#ff6b6b';
                comboEl.style.textShadow = '0 0 15px rgba(255,107,107,0.7)';
                comboEl.style.fontSize = '3em';
            }
            
            document.body.appendChild(comboEl);
            setTimeout(() => comboEl.remove(), 800);
        }

        // æ–°å¢ç²’å­æ•ˆæœå‡½æ•°
        function createParticles(x, y) {
            const colors = ['#ffd700', '#ff6b6b', '#4ecdc4', '#45b7d1'];
            for(let i = 0; i < 12; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                
                // éšæœºå‚æ•°
                const angle = (Math.random() * 360) * Math.PI/180;
                const distance = 80 + Math.random() * 40;
                const tx = Math.cos(angle) * distance;
                const ty = Math.sin(angle) * distance;
                
                particle.style.cssText = `
                    --tx: ${tx}px;
                    --ty: ${ty}px;
                    left: ${x}px;
                    top: ${y}px;
                    background: ${colors[Math.floor(Math.random()*colors.length)]};
                    animation-delay: ${i*0.02}s;
                `;
                
                document.body.appendChild(particle);
                setTimeout(() => particle.remove(), 800);
            }
        }
        
        // æ–°å¢é‡‘å¸é›¨æ•ˆæœ
        function createCoinRain() {
            if (combo < 2) return; // åªæœ‰è¿å‡»å¤§äº2æ‰è§¦å‘
            
            const coinCount = Math.min(combo * 3, 20); // æ ¹æ®è¿å‡»æ•°é‡å¢åŠ é‡‘å¸ï¼Œä½†æœ€å¤š20ä¸ª
            document.getElementById('coinSound').play();
            
            for(let i = 0; i < coinCount; i++) {
                const coin = document.createElement('div');
                coin.className = 'coin';
                
                coin.style.cssText = `
                    left: ${10 + Math.random() * 80}vw;
                    animation-delay: ${i * 0.1}s;
                    animation-duration: ${1 + Math.random()}s;
                `;
                
                document.body.appendChild(coin);
                setTimeout(() => coin.remove(), 2000);
            }
        }
        
        // æ–°å¢æˆå°±è§£é”å‡½æ•°
        function unlockAchievement(id) {
            const achievement = achievements.find(a => a.id === id);
            if (!achievement || achievement.unlocked) return;
            
            achievement.unlocked = true;
            document.getElementById('achievementSound').play();
            
            const achievementEl = document.createElement('div');
            achievementEl.className = 'achievement';
            achievementEl.innerHTML = `
                <div class="achievement-icon">${achievement.icon}</div>
                <div class="achievement-text">
                    <div class="achievement-title">${achievement.title}</div>
                    <div class="achievement-desc">${achievement.description}</div>
                </div>
            `;
            
            document.body.appendChild(achievementEl);
            setTimeout(() => achievementEl.remove(), 5000);
        }

        // åˆ›å»ºæ‰­è›‹åŠ¨ç”»å¢å¼ºç‰ˆ
        function createGachaAnimation() {
            const gacha = document.createElement('div');
            gacha.className = 'gacha-animation';
            
            // æ·»åŠ é—ªå…‰æ•ˆæœ
            for(let i = 0; i < 8; i++) {
                const sparkle = document.createElement('div');
                sparkle.className = 'gacha-sparkle';
                sparkle.style.transform = `rotate(${i * 45}deg)`;
                sparkle.style.animationDelay = `${i * 0.05}s`;
                gacha.appendChild(sparkle);
            }
            
            setTimeout(() => {
                const counterPos = document.querySelector('.gacha-counter').getBoundingClientRect();
                gacha.style.transition = 'all 0.6s cubic-bezier(0.18, 0.89, 0.32, 1.28)';
                gacha.style.left = `${counterPos.left + 20}px`;
                gacha.style.top = `${counterPos.top + 20}px`;
                gacha.style.transform = 'scale(0.3)';
                
                setTimeout(() => {
                    gacha.remove();
                    gachaCount++;
                    document.getElementById('gachaCount').textContent = gachaCount;
                    
                    // æ£€æŸ¥æ‰­è›‹æ”¶è—å®¶æˆå°±
                    if (gachaCount >= 5) {
                        unlockAchievement('gacha5');
                    }
                }, 600);
            }, 800);

            document.body.appendChild(gacha);
        }

        // æ›´æ–°è®¡æ—¶å™¨æ˜¾ç¤º
        function updateTimer() {
            const timerEl = document.getElementById('timer');
            if (!timerEl) return;
            
            const seconds = Math.ceil(timeRemaining / 1000);
            timerEl.textContent = `â±ï¸ ${seconds}ç§’`;
            
            // æ—¶é—´å°‘äº5ç§’æ—¶å˜çº¢
            if (seconds <= 5) {
                timerEl.style.color = '#ff0000';
                timerEl.style.animation = 'pulse 0.5s infinite alternate';
            } else {
                timerEl.style.color = '#ff69b4';
                timerEl.style.animation = 'none';
            }
        }
        
        // ä¸‹ä¸€é¢˜
        function nextQuestion() {
            document.getElementById('btnSound').play(); // æŒ‰é’®éŸ³æ•ˆ
            
            // æ¸…é™¤è®¡æ—¶å™¨
            if (timer) {
                clearInterval(timer);
                timer = null;
            }
            
            if (currentQuestion < 9) {
                currentQuestion++;
                showQuestion();
            } else {
                // ç§»é™¤è®¡æ—¶å™¨æ˜¾ç¤º
                const timerEl = document.getElementById('timer');
                if (timerEl) timerEl.remove();
                
                showResult();
            }
        }

        // æ˜¾ç¤ºç»“æœå¢å¼ºç‰ˆ
        function showResult() {
            document.getElementById('quizScreen').style.display = 'none';
            document.getElementById('resultScreen').style.display = 'block';
            document.getElementById('scoreText').textContent = score;
            document.getElementById('resultGachaCount').textContent = collectedGachas.length;

            const emoji = document.getElementById('scoreEmoji');
            emoji.textContent = `æœ€å¤§è¿å‡»ï¼š${maxCombo}æ¬¡ ğŸ† [${getDifficultyName(currentDifficulty)}]`;

            if (score >= 80) {
                emoji.textContent += ' å¤ªæ£’äº†ï¼âœ¨';
            } else if (score >= 60) {
                emoji.textContent += ' ç»§ç»­åŠªåŠ›å“¦ï¼ğŸ’ª';
            } else {
                emoji.textContent += ' åˆ«ç°å¿ƒç»§ç»­åŠ æ²¹å“¦ï¼ğŸŒ±';
            }
            
            // æ£€æŸ¥å®Œç¾ç­”é¢˜æˆå°±
            if (score === 100) {
                unlockAchievement('perfect');
            }
            
            // æ£€æŸ¥å›°éš¾æ¨¡å¼æˆå°±
            if (currentDifficulty === 'hard' && score >= 60) {
                unlockAchievement('hardMode');
            }
            
            document.getElementById('viewWrongBtn').style.display = 
                score === 100 ? 'none' : 'block';
                
            // åˆ›å»ºç»“ç®—çƒŸèŠ±
            createFireworks();
        }
        
        // æ–°å¢çƒŸèŠ±æ•ˆæœ
        function createFireworks() {
            document.getElementById('fireworkSound').play();
            
            const fireworkCount = Math.max(5, Math.floor(score / 10));
            const colors = ['#ff5252', '#ffeb3b', '#2196f3', '#4caf50', '#e040fb', '#ff9800'];
            
            for(let i = 0; i < fireworkCount; i++) {
                setTimeout(() => {
                    const x = 100 + Math.random() * (window.innerWidth - 200);
                    const y = 100 + Math.random() * (window.innerHeight - 200);
                    const color = colors[Math.floor(Math.random() * colors.length)];
                    
                    const firework = document.createElement('div');
                    firework.className = 'firework';
                    firework.style.cssText = `
                        left: ${x}px;
                        top: ${y}px;
                        background: ${color};
                        box-shadow: 0 0 30px ${color};
                        animation: fireworkExplode 1s ease-out forwards;
                    `;
                    
                    document.body.appendChild(firework);
                    
                    // åˆ›å»ºçƒŸèŠ±ç²’å­
                    for(let j = 0; j < 20; j++) {
                        const particle = document.createElement('div');
                        particle.className = 'particle';
                        
                        const angle = (Math.random() * 360) * Math.PI/180;
                        const distance = 100 + Math.random() * 100;
                        const tx = Math.cos(angle) * distance;
                        const ty = Math.sin(angle) * distance;
                        
                        particle.style.cssText = `
                            --tx: ${tx}px;
                            --ty: ${ty}px;
                            left: ${x}px;
                            top: ${y}px;
                            background: ${color};
                            animation-delay: 0.1s;
                            animation-duration: 1s;
                        `;
                        
                        document.body.appendChild(particle);
                        setTimeout(() => particle.remove(), 1000);
                    }
                    
                    setTimeout(() => firework.remove(), 1000);
                }, i * 300);
            }
        }
        
        // è·å–éš¾åº¦åç§°
        function getDifficultyName(difficulty) {
            switch(difficulty) {
                case 'easy': return 'ç®€å•æ¨¡å¼';
                case 'medium': return 'ä¸­ç­‰æ¨¡å¼';
                case 'hard': return 'å›°éš¾æ¨¡å¼';
                default: return 'æœªçŸ¥æ¨¡å¼';
            }
        }
        
        // æ·»åŠ é‡æ–°å¼€å§‹å‡½æ•°
        function restartQuiz() {
            document.getElementById('btnSound').play(); // æŒ‰é’®éŸ³æ•ˆ
            document.getElementById('resultScreen').style.display = 'none';
            document.getElementById('startScreen').style.display = 'flex';
            
            // é‡ç½®æ‰€æœ‰çŠ¶æ€
            currentQuestion = 0;
            score = 0;
            combo = 0;
            maxCombo = 0;
            wrongAnswers = [];
            gachaCount = 0;
            collectedGachas = [];
            document.getElementById('gachaCount').textContent = '0';
            
            // æ˜¾ç¤ºéš¾åº¦é€‰æ‹©
            showDifficultySelection();
        }

        // æ·»åŠ è¿”å›ç»“æœç•Œé¢çš„å‡½æ•°
        function backToResult() {
            document.getElementById('btnSound').play(); // æŒ‰é’®éŸ³æ•ˆ
            document.getElementById('wrongScreen').style.display = 'none';
            document.getElementById('resultScreen').style.display = 'block';
        }
        
        // æ·»åŠ åœ¨restartQuizå‡½æ•°å‰
        function backToStart() {
            document.getElementById('btnSound').play(); // æŒ‰é’®éŸ³æ•ˆ
            document.getElementById('quizScreen').style.display = 'none';
            document.getElementById('startScreen').style.display = 'flex';
            
            // æ¸…é™¤è®¡æ—¶å™¨
            if (timer) {
                clearInterval(timer);
                timer = null;
            }
            
            // ç§»é™¤è®¡æ—¶å™¨æ˜¾ç¤º
            const timerEl = document.getElementById('timer');
            if (timerEl) timerEl.remove();
            
            // é‡ç½®æ‰€æœ‰è¿›åº¦çŠ¶æ€
            currentQuestion = 0;
            score = 0;
            wrongAnswers = [];
            gachaCount = 0;
            collectedGachas = [];
            
            // é‡ç½®ç•Œé¢æ˜¾ç¤º
            document.getElementById('gachaCount').textContent = '0';
            document.getElementById('progress').style.width = '0%';
            document.getElementById('progressText').textContent = 'ç¬¬1/10é¢˜';
            
            // æ¸…é™¤é€‰é¡¹æ ·å¼
            const options = document.querySelectorAll('.option');
            options.forEach(opt => {
                opt.classList.remove('correct-answer', 'wrong-answer');
            });
            
            // æ˜¾ç¤ºéš¾åº¦é€‰æ‹©
            showDifficultySelection();
        }

        // ä¿®æ”¹æ‰“å¼€æ‰­è›‹å‡½æ•°
        // ä¿®æ”¹æ‰­è›‹å¼€å¯å‡½æ•°ï¼Œå°†å­¦ç”Ÿåå­—ä¸æ‰­è›‹å…³è”
    function openGacha() {
        document.getElementById('gachaSound').play(); // æ‰­è›‹å¼€èŠ±éŸ³æ•ˆ
        const area = document.getElementById('gachaOpenArea');
        area.style.display = 'flex';
        
        // è·å–å­¦ç”Ÿæ•°æ®
        let studentName = '';
        if (typeof StudentData !== 'undefined') {
            const selectedStudent = StudentData.getStudent();
            if (selectedStudent && selectedStudent.name) {
                studentName = selectedStudent.name;
            }
        }
        
        area.innerHTML = collectedGachas.map((_, i) => {
            return `
                <div class="gacha-shell" style="animation-delay:${i*0.2}s">
                    <!-- è£‚å¼€åŠ¨ç”» -->
                    <div class="gacha-crack"></div>
                    
                    <!-- èŠ±æœµæœ¬ä½“ -->
                    <div class="flower">
                        <!-- èŠ±è•Š -->
                        <div class="center">${studentName}</div>
                        
                        <!-- å¤–å±‚èŠ±ç“£ -->
                        ${Array(8).fill().map((_,j)=>`
                            <div class="petal-outer" style="--deg:${j*45}deg">
                                <div class="petal-inner"></div>
                            </div>
                        `).join('')}
                        
                        <!-- ç»½æ”¾æ˜Ÿå…‰ -->
                        ${Array(6).fill().map((_,j)=>`
                            <div class="star" style="
                                left:${Math.random()*70+15}%;
                                top:${Math.random()*70+15}%;
                                animation-delay:${j*0.1}s">
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
        }).join('');
        
        // æ·»åŠ é¢å¤–çš„æ˜Ÿå…‰æ•ˆæœ
        setTimeout(() => {
            const shells = document.querySelectorAll('.gacha-shell');
            shells.forEach(shell => {
                const rect = shell.getBoundingClientRect();
                createParticles(rect.left + rect.width/2, rect.top + rect.height/2);
            });
        }, 500);
    }

        // ä¿®æ”¹showWrongå‡½æ•°ä»¥é€‚åº”æ–°çš„é€‰é¡¹æ˜ å°„
        function showWrong() {
            document.getElementById('btnSound').play(); // æŒ‰é’®éŸ³æ•ˆ
            const wrongList = document.getElementById('wrongList');
            wrongList.innerHTML = wrongAnswers.map((item, index) => {
                let optionsHtml = item.question.options.map((opt, idx) => {
                    const optLetter = String.fromCharCode(65 + idx);
                    let markClass = '';
                    let textClass = '';
                    
                    if (optLetter === item.question.answer) {
                        markClass = 'correct-mark';
                        textClass = 'correct-answer';
                    } else if (optLetter === item.selected) {
                        markClass = 'wrong-mark';
                        textClass = 'wrong-answer';
                    }
                    
                    return `
                        <div class="wrong-option ${textClass}">
                            <span class="option-mark ${markClass}">${optLetter}</span>
                            ${opt}
                        </div>
                    `;
                }).join('');

                let selectedText = item.selected === 'timeout' ? 
                    '<span style="color:#ff4444;">âŒ æ—¶é—´åˆ°æœªä½œç­”</span>' : 
                    `<span style="color:#ff4444;">âŒ ä½ çš„é€‰æ‹©ï¼š${item.selected}</span>`;

                return `
                    <div class="wrong-item">
                        <div style="font-weight:bold; color:#ff69b4;">${index + 1}. ${item.question.question}</div>
                        <div class="wrong-options">
                            ${optionsHtml}
                        </div>
                        <div style="margin-top:10px;">
                            ${selectedText}
                            <span style="color:#77dd77; margin-left:15px;">âœ… æ­£ç¡®ç­”æ¡ˆï¼š${item.question.answer}</span>
                        </div>
                    </div>
                `;
            }).join('');
            
            document.getElementById('resultScreen').style.display = 'none';
            document.getElementById('wrongScreen').style.display = 'block';
        }
    </script>
</body>
</html>